<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		
		<record model="ir.ui.view" id="wtc_product_pricelist_item_form_view">
		    <field name="name">wtc.product.pricelist.item.form</field>
		    <field name="model">product.pricelist.item</field>
		    <field name="type">form</field>
		    <field name="inherit_id" ref="product.product_pricelist_item_form_view"/>
		    <field name="arch" type="xml">
		    	
		    	<field name="product_id" position="attributes">
		    		<attribute name="on_change">product_id_change(product_id,product_tmpl_id,categ_id)</attribute>
		    	</field>
		    	<field name="product_tmpl_id" position="attributes">
		    		<attribute name="on_change">product_id_change(product_id,product_tmpl_id,categ_id)</attribute>
		    	</field>
		    	<field name="categ_id" position="attributes">
		    		<attribute name="on_change">product_id_change(product_id,product_tmpl_id,categ_id)</attribute>
		    	</field>
				
			</field>
		</record>
		
		<record model="ir.ui.view" id="wtc_product_pricelist_form_view">
		    <field name="name">wtc.product.pricelist.form</field>
		    <field name="model">product.pricelist</field>
		    <field name="type">form</field>
		    <field name="inherit_id" ref="product.product_pricelist_view"/>
		    <field name="arch" type="xml">
		    	
            	<xpath expr="//form" position="inside">
            		<notebook>
						<page string="Audit Trail">
							<group>
								<group>
									<field name="create_uid" readonly="1"></field>
									<field name="create_date" readonly="1"></field>
								</group>
								<group>							
									<field name="write_uid" readonly="1"></field>
									<field name="write_date" readonly="1"></field>
								</group>
							</group>
						</page>
					</notebook>
				</xpath>
				
			</field>
		</record>	
		
		<record model="ir.ui.view" id="wtc_product_pricelist_version_form_view">
		    <field name="name">wtc.product.pricelist.version.form</field>
		    <field name="model">product.pricelist.version</field>
		    <field name="type">form</field>
		    <field name="inherit_id" ref="product.product_pricelist_version_form_view"/>
		    <field name="arch" type="xml">
		    	
            	<xpath expr="//page[@string='Item List']" position="after">
						<page string="Audit Trail">
							<group>
								<group>
									<field name="create_uid" readonly="1"></field>
									<field name="create_date" readonly="1"></field>
								</group>
								<group>							
									<field name="write_uid" readonly="1"></field>
									<field name="write_date" readonly="1"></field>
								</group>
							</group>
						</page>
				</xpath>
				
			</field>
		</record>
					
		<record model="ir.ui.view" id="wtc_pricelist_form_view">
		    <field name="name">wtc.pricelist.form</field>
		    <field name="model">wtc.pricelist</field>
		    <field name="arch" type="xml">
		    	
		    	<form string="Check Prices" create="false">
		    		<sheet>
			    		<group col="4">
			    			<field name="product_id" options="{'no_open':True,'no_create':True}" on_change="pricelist_change(product_id,branch_id)"/>
			    			<field name="branch_id" options="{'no_open':True,'no_create':True}" on_change="pricelist_change(product_id,branch_id)"/>
			    			<field name="name" readonly="True"/>
			    			<field name="categ_id" readonly="True" options="{'no_open':True,'no_create':True}"/>
			    			<field name="pricelist_unit_purchase_id" readonly="True" options="{'no_open':True,'no_create':True}"/>
			    			<field name="pricelist_unit_sales_id" readonly="True" options="{'no_open':True,'no_create':True}"/>
			    			<field name="pricelist_part_purchase_id" readonly="True" options="{'no_open':True,'no_create':True}"/>
			    			<field name="pricelist_part_sales_id" readonly="True" options="{'no_open':True,'no_create':True}"/>
			    			<field name="pricelist_bbn_hitam_id" readonly="True" options="{'no_open':True,'no_create':True}"/>
			    			<field name="pricelist_bbn_merah_id" readonly="True" options="{'no_open':True,'no_create':True}"/>
			    			<field name="harga_beli" readonly="True"/>
			    			<field name="harga_jual" readonly="True"/>
			    			<field name="harga_jual_bbn_hitam" readonly="True"/>
			    			<field name="harga_jual_bbn_merah" readonly="True"/>
			    			<field name="total_stock" readonly="True"/>
			    			<field name="stock_intransit" readonly="True"/>
			    			<field name="stock_available" readonly="True"/>
			    			<field name="stock_reserved" readonly="True"/>
						</group>
						<separator string="Stock Other Branch" colspan="4"/>
						<field colspan="4" name="other_branch_prize_ids" nolabel="1" widget="one2many_list">
							<tree string="" editable="false" edit="false" create="false" delete="false">
								<field name="branch_code"/>
	                            <field name="branch_name"/>
	                            <field name="stock_available"/>                                    
							</tree>
	                    </field>
		    		</sheet>
		    	</form>
		    	
			</field>
		</record>
		
		<record model="ir.actions.act_window" id="wtc_pricelist_action">
		    <field name="name">Check Prices</field>
		    <field name="res_model">wtc.pricelist</field>
		    <field name="view_type">form</field>
    		<field name="view_mode">form</field>
    		<field name="context" eval="{'default_categ_id': ref('wtc_product.categ_unit')}"/>
		</record>

		<record model="ir.actions.act_window" id="wtc_pricelist_action2">
		    <field name="name">Check Prices</field>
		    <field name="res_model">wtc.pricelist</field>
		    <field name="view_type">form</field>
    		<field name="view_mode">form</field>
    		<field name="context" eval="{'default_categ_id': ref('wtc_product.categ_sparepart')}"/>
		</record>
										
		<menuitem name="Check Prices" parent="wtc_dealer_menu.showroom_sales_menu" sequence="1" id="wtc_pricelist_menu" action="wtc_pricelist_action"/>
		<menuitem name="Check Prices" parent="wtc_dealer_menu.workshop_sales_menu" sequence="1" id="wtc_pricelist_menu_2" action="wtc_pricelist_action2"/>
				
<!-- NEW -->
	        <menuitem
            action="product.product_pricelist_action" id="menu_product_pricelist_action_master"
            parent="wtc_dealer_menu.ma_pricelist_menu" sequence="1"/>
	        	
        <menuitem
            action="product.product_pricelist_action2" id="menu_product_pricelist_action2_master"
            parent="wtc_dealer_menu.ma_pricelist_menu" sequence="2"/>
            	            	
            	            			
	</data>
</openerp>