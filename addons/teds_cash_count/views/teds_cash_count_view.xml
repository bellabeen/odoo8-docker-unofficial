<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		<record id="view_teds_cash_count_berita_acara_wizard" model="ir.ui.view">
			<field name="name">teds.cash.count.berita.acara.wizard</field>
			<field name="model">teds.cash.count.berita.acara.wizard</field>
			<field name="arch" type="xml">
				<form>
					<sheet>
						<group>
							<field name="cash_count_id" options="{'no_open':True,'no_create':True}" readonly="1"/>
							<field name="options" readonly="1"/>
							<field name="note"/>
						</group>
						<footer>
		                    <button name="action_submit" string="Print" type="object" class="oe_highlight" />
		                    <button string="Close" class="oe_link" special="cancel" />
		                </footer>
					</sheet>
				</form>
			</field>
		</record>
		
		<record id="view_teds_cash_count_cancel_wizard" model="ir.ui.view">
			<field name="name">teds.cash.count.cancel.wizard</field>
			<field name="model">teds.cash.count</field>
			<field name="priority">10</field>
			<field name="arch" type="xml">
				<form>
					<group>
						<field name="reason_cancel" required="1"/>
					</group>
					<footer>
	                    <button name="action_cancel_submit" string="Submit" type="object" class="oe_highlight" />
	                    <button string="Close" class="oe_link" special="cancel" />
	                </footer>
				</form>
			</field>

		</record>
		
		<record id="view_teds_cash_count_tree" model="ir.ui.view">
			<field name="name">teds.cash.count.tree</field>
			<field name="model">teds.cash.count</field>
			<field name="priority">1</field>
			<field name="arch" type="xml">
				<tree>
					<field name="name"/>
					<field name="branch_id"/>
					<field name="tipe"/>
					<field name="date"/>
					<field name="generate_date"/>
					<field name="state"/>
				</tree>
			</field>
		</record>
		
		<record id="view_teds_cash_count_form" model="ir.ui.view">
			<field name="name">teds.cash.count.form</field>
			<field name="model">teds.cash.count</field>
			<field name="priority">1</field>
			<field name="arch" type="xml">
				<form>
					<header>
	                	<button name="action_generate_data" attrs="{'invisible':['|',('create_date','=',False),('generate_date','!=',False)]}" string="Generate Data" class="oe_highlight" type="object" groups="teds_cash_count.group_teds_cash_count_generate_stock_button"/>
	                	<!-- <button name="action_rfa" type="object" string="RFA" class="oe_highlight" attrs="{'invisible':['|',('state','!=','draft'),('generate_date','=',False)]}"/>
	                	<button name="action_approved" type="object" string="Approved" class="oe_highlight" groups="teds_cash_count.group_teds_cash_count_approved_button" states="rfa"/> -->
	                	<button name="action_post" attrs="{'invisible':['|',('state','!=','draft'),('generate_date','=',False)]}" string="Post" class="oe_highlight" type="object" confirm = "HARAP PASTIKAN KEMBALI DATA CASH COUNT ANTARA FISIK DAN SISTEM SUDAH SESUAI, CEK ISI BRANKAS DAN PASTIKAN SEMUA FISIK UANG DILUAR PENERIMAAN SISTEM SUDAH TERCATAT DI BERITA ACARA" groups="teds_cash_count.group_teds_cash_count_posted_button"/>
	                	<button name="action_update_plafon" string="Update Plafon" type="object" attrs="{'invisible':['|',('state','!=','draft'),('generate_date','=',False)]}" groups="teds_cash_count.group_teds_cash_count_update_plafon_button"/>
	                	<button name="action_cancel" states="posted" string="Cancel" type="object" groups="teds_cash_count.group_teds_cash_count_cancel_button"/>
	                	<button name="action_bakso" states="posted" string="Berita Acara" type="object"/>
	                	<field name="state" widget="statusbar" statusbar_visible="draft,posted"/>
	                </header>
					<div class="oe_title">                      
							<h1>
							<field name="name" readonly="1"/>
						</h1>
					</div>
					<group>
						<group>
							<field name="branch_id" options="{'no_open':True,'no_create':True}" required="1" attrs="{'readonly':[('name','!=',False)]}"/>
							<field name="kasir" required="1" attrs="{'readonly':[('state','!=','draft')]}"/>
							<field name="admin_pos" required="1" attrs="{'readonly':[('state','!=','draft')]}"/>
							<field name="adh" required="1" attrs="{'readonly':[('state','!=','draft')]}"/>
							<field name="soh" required="1" attrs="{'readonly':[('state','!=','draft')]}"/>
						</group>
						<group>
							<field name="date" readonly="1"/>
							<field name="tipe" required="1" attrs="{'readonly':[('state','!=','draft')]}"/>
							<field name="generate_date" readonly="1" attrs="{'invisible':[('generate_date','=',False)]}"/>
							<field name="create_date" invisible="1"/>
							<field name="reason_cancel" readonly="1" attrs="{'invisible':[('state','!=','cancelled')]}"/>
						</group>
					</group>
					<notebook>
							<page string="Cash">
							<field name="cash_detail_ids" nolabel="1" attrs="{'readonly':[('state','!=','draft')]}">
								<tree create="false" delete="false" editable="bottom">
									<field name="name" readonly="1"/>
									<field name="journal" readonly="1"/>
									<field name="status" readonly="1"/>
									<field name="amount" readonly="1" sum="Total"/>
									<field name="amount_fisik" required="1" sum="Total"/>
									<field name="selisih" readonly="1" sum="Total"/>
									<field name="validasi_id" string="Setoran Bank" options="{'no_open':True,'no_create':True}" widget="selection"/>
									<!-- <field name="keterangan" attrs="{'required':[('validasi_id','!=',False)]}"/> -->
									<field name="type" invisible="1"/>
								</tree>
							</field>
						</page>
						<page string="Petty Cash" attrs="{'invisible':[('tipe','!=','Showroom')]}">
							<group col="6" colspan="3">
									<field name="plafon_petty_cash_sr" readonly="1"/>
									<field name="plafon_petty_cash_ws" readonly="1"/>
									<field name="plafon_petty_cash_atl_btl" readonly="1"/>
									<field name="fisik_petty_cash_sr" required="1" attrs="{'readonly':[('state','!=','draft')]}"/>
									<field name="fisik_petty_cash_ws" required="1" attrs="{'readonly':[('state','!=','draft')]}"/>
									<field name="fisik_petty_cash_atl_btl" required="1" attrs="{'readonly':[('state','!=','draft')]}"/>
									<field name="saldo_pc_sr" required="1" attrs="{'readonly':[('state','!=','draft')]}"/>
									<field name="saldo_pc_ws" required="1" attrs="{'readonly':[('state','!=','draft')]}"/>
									<field name="saldo_pc_atl_btl" required="1" attrs="{'readonly':[('state','!=','draft')]}"/>
								
							</group>
							<field name="petty_cash_detail_ids" nolabel="1" attrs="{'readonly':[('state','!=','draft')]}">
								<tree create="false" delete="false" editable="bottom">
									<field name="name" readonly="1"/>
									<field name="journal" readonly="1" string="Payment Method"/>
									<field name="date" readonly="1"/>
									<field name="description" readonly="1"/>
									<field name="amount" readonly="1" string="Amount Real" sum="Total"/>
									<field name="status" readonly="1"/>
									<field name="validasi_id" string="Validasi" options="{'no_open':True,'no_create':True}" widget="selection"/>
									<field name="keterangan" attrs="{'required':[('validasi_id','!=',False)]}"/>
									<field name="type" invisible="1"/>
								</tree>
							</field>
						</page>
						<page string="Reimburse Petty Cash" attrs="{'invisible':[('tipe','!=','Showroom')]}">
							<field name="reimburse_petty_cash_detail_ids" nolabel="1" attrs="{'readonly':[('state','!=','draft')]}">
								<tree create="false" delete="false" editable="bottom">
									<field name="name" readonly="1"/>
									<field name="journal" readonly="1" string="Payment Method"/>
									<field name="date" readonly="1" string="Date Request"/>
									<field name="amount" readonly="1" string="Total Amount" sum="Total"/>
									<field name="status" readonly="1"/>
									<field name="type" invisible="1"/>
								</tree>
							</field>
						</page>
						<page string="Penerimaan Lain">
							<field name="peneriman_lain_ids" nolabel="1" attrs="{'readonly':[('state','!=','draft')]}">
								<tree editable="bottom">
									<field name="name" required="1"/>
									<field name="amount" required="1" sum="Total"/>
									<field name="keterangan" required="1"/>
								</tree>
							</field>
						</page>
						<page string="Audit Trail">
							<group>
								<group>
									<field name="create_uid" readonly="1"/>
									<field name="create_date" readonly="1"/>
									<field name="post_uid" readonly="1" attrs="{'invisible':[('post_uid','=',False)]}"/>
									<field name="post_date" readonly="1" attrs="{'invisible':[('post_date','=',False)]}"/>
								</group>
								<group>							
									<field name="write_uid" readonly="1"/>
									<field name="write_date" readonly="1"/>
									<field name="cancel_uid" attrs="{'invisible':[('cancel_uid','=',False)]}"/>
									<field name="cancel_date" attrs="{'invisible':[('cancel_date','=',False)]}"/>
								</group>
							</group>
						</page>		       
					</notebook>
				</form>
			</field>
		</record>

		<record id="view_teds_cash_count_search" model="ir.ui.view">
            <field name="name">teds.cash.count.search</field>
            <field name="model">teds.cash.count</field>
            <field name="arch" type="xml">
            	<search string="Rules">
                    <field name="name"/>
                    <field name="branch_id"/>
                    <field name="tipe"/>
                    <filter name="state_draft" domain="[('state','=','draft')]" string="Draft"/>
                    <filter name="state_posted" domain="[('state','=','posted')]" string="Posted"/>
                    <group expand="0" string="Group By...">
                        <filter name="group_by_branch" string="Branch" domain="[]" context="{'group_by':'branch_id'}"/>
                        <filter name="group_by_tipe" string="Tipe" domain="[]" context="{'group_by':'Tipe'}"/>
                        <filter name="group_by_state" string="State" domain="[]" context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>

		
		<record id="action_teds_cash_count" model="ir.actions.act_window">
        	<field name="name">Cash Count</field>
			<field name="res_model">teds.cash.count</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="context">{'search_default_state_draft':1}</field>
		</record>
		
		<!-- Print Bakso -->
		<report 
            string="Print BA Cash Count" 
            id="action_teds_cash_count_print_berita_acara" 
            model="teds.cash.count.berita.acara.wizard" 
            report_type="qweb-pdf"
            name="teds_cash_count.teds_cash_count_print_berita_acara" 
            file="teds_cash_count.teds_cash_count_print_berita_acara" 
            menu="False"/>

		<menuitem id="teds_cash_count_menuitem" action="action_teds_cash_count" parent="wtc_dealer_menu.backoffice_bankandcash_menu" sequence="6"/>
	</data>
</openerp>