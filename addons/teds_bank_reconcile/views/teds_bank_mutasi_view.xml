<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		<record id="view_import_bank_mutasi_wizard" model="ir.ui.view">
			<field name="name">Import Mutasi Bank</field>
			<field name="model">teds.import.rekening.koran</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
		        <form string="Import Mutasi Bank">
		        	<group>
	                    <field name="branch_id" required="1" options="{'no_create': True,'no_open': True}"/>
	                    <field name="format" required="1"/>
	                    <field name="data_file" required="1"/>
	                    <field name="account_id" attrs="{'invisible':[('format','=','update')],'required':[('format','!=','update')]}" options="{'no_create': True,'no_open': True}" domain="[('type','=','liquidity'),('branch_id','=',branch_id)]"/>
	                   	<field name="journal_id" attrs="{'invisible':[('format','=','update')]}" options="{'no_create': True,'no_open': True}"/>
	                   <field name="saldo_akhir" attrs="{'invisible':[('format','=','update')],'required':[('format','!=','update')]}"/>
	            	</group>
	                <footer>
	                    <button name="import_excel" string="Import" type="object" class="oe_highlight" />
                      	or 
                        <button string="Cancel" class="oe_link" special="cancel" />
	                </footer>
		        </form>
	    	</field>
	    </record>

	    <record id="view_import_bank_mutasi_wizard_2" model="ir.ui.view">
			<field name="name">Import Mutasi Bank (Update)</field>
			<field name="model">teds.import.rekening.koran</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
		        <form string="Import Mutasi Bank">
		        	<group>
	                    <field name="branch_id" required="1" options="{'no_create': True,'no_open': True}"/>
	                    <field name="format" readonly="1"/>
	                    <field name="data_file" required="1"/>
	            	</group>
	                <footer>
	                    <button name="import_excel" string="Import" type="object" class="oe_highlight" />
                      	or 
                        <button string="Cancel" class="oe_link" special="cancel" />
	                </footer>
		        </form>
	    	</field>
	    </record>

	    <record id="action_import_bank_mutasi" model="ir.actions.act_window">
			<field name="name">Import Mutasi Bank</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">teds.import.rekening.koran</field>
			<field name="view_type">form</field>
			<field name="view_mode">form</field>
			<field name="view_id" ref="view_import_bank_mutasi_wizard"/>
			<field name="target">new</field>
	    </record>

	    <record id="action_import_bank_mutasi_2" model="ir.actions.act_window">
			<field name="name">Import Mutasi Bank (Update)</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">teds.import.rekening.koran</field>
			<field name="view_type">form</field>
			<field name="view_mode">form</field>
			<field name="view_id" ref="view_import_bank_mutasi_wizard_2"/>
            <field name="context">{'default_format':'update'}</field>
			<field name="target">new</field>
	    </record>
   
     	<record id="teds_bank_mutasi_tree_view" model="ir.ui.view">
            <field name="name">teds.bank.mutasi.tree.view</field>
            <field name="model">teds.bank.mutasi</field>
            <field name="arch" type="xml">
                <tree string="Mutasi Bank" create="false">
	                <field name="name"/>
	                <field name="branch_id"/>
	                <field name="remark"/>
	                <field name="date" string="Tanggal RK"/>
	                <field name="debit"/>
	                <field name="credit"/>
	                <field name="coa"/>	
	                <field name="no_sistem"/>	
	                <field name="format"/>
	                <field name="date_upload"/>
	                <field name="state"/>
                </tree>
            </field>
        </record>	
        
        
        
        <record model="ir.ui.view" id="teds_bank_mutasi_form_view">
		    <field name="name">teds.bank.mutasi.form</field>
		    <field name="model">teds.bank.mutasi</field>
		    <field name="arch" type="xml">
		    	<form string="Bank Mutasi" create="false">
		    		<header>
		        		<button name="button_reconcile" states="Outstanding" string="Auto" type="object" class="oe_highlight" groups="teds_bank_reconcile.group_bank_mutasi_auto_reconcile_button" attrs="{'invisible': [('state','!=','Outstanding')]}"/>
		        		<!-- <field name="state" widget="statusbar" statusbar_visible="Outstanding,Reconciled,Auto Reconcile" statusbar_colors='{"Outstanding":"red","Reconciled":"done"}'/> -->
		        	</header>
		    		<sheet>
		    			<group>
						 	<field name="name" readonly="1"/>
						 	<field name="remark" readonly="1"/>
  			 	            <field name="bank_reconcile_id" readonly="1"/>
			                <field name="debit" readonly="1"/>
			                <field name="credit" readonly="1"/>	
			                <field name="amount" readonly="1"/>
			                <field name="coa" readonly="1"/>	
			                <field name="no_sistem" attrs="{'readonly':['|',('date','=',False),('state','!=','Outstanding')]}"/>	
			                <field name="date" readonly="1"/>
			                <field name="time" readonly="1"/>
			                <field name="account_id" readonly="1" options="{'no_open':True,'no_create':True}"/>
			                <field name="journal_id" readonly="1" options="{'no_open':True,'no_create':True}"/>
			                <field name="format" readonly="1"/>
			                <field name="state" readonly="1"/>
			                <field name="date_upload" readonly="1"/>
							<field name="is_posted" readonly="1"/>
			        	</group>
		    		</sheet>
		    	</form>
			</field>
		</record>

		<!-- Search -->
		<record id="view_bank_mutasi_filter" model="ir.ui.view">
            <field name="name">bank.mutasi.filter</field>
            <field name="model">teds.bank.mutasi</field>
            <field name="arch" type="xml">
                <search string="Search Bank Mutasi">
                	<field name="name" string="Name"/>
                    <field name="coa" string="COA"/>
                    <field name="no_sistem" string="No Sistem"/>
                    <field name="remark"/>
                    <field name="format"/>
                    <field name="date" string="Date Mutation"/>
                    <filter name="Outstanding" string="Outstanding" domain="[('state','=','Outstanding')]"/>
                    <filter name="Pending" string="Pending" domain="[('date','=',False)]"/>

                    <filter name="Reconciled" string="Reconciled" domain="[('state','=','Reconciled')]"/>
                    <filter name="Auto Reconcile" string="Auto Reconcile" domain="[('state','=','Auto Reconcile')]"/>

                    <group expand="1" string="Group By">
	                    <filter string="Account" name="account_id" context="{'group_by':'account_id'}"/>
					</group>	                   

		        </search>
            </field>
        </record> 
	
		<record id="action_bank_mutasi" model="ir.actions.act_window">
            <field name="res_model">teds.bank.mutasi</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="name">Bank Mutation</field>
            <field name="context">{'search_default_Outstanding':1,'search_default_Pending':1,'search_default_account_id':1}</field>
       	</record>
       	
       	<record id="action_bank_mutasi_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="teds_bank_mutasi_tree_view"/>
            <field name="act_window_id" ref="action_bank_mutasi"/>
        </record>
            
        <record id="action_bank_mutasi_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="teds_bank_mutasi_form_view"/>
            <field name="act_window_id" ref="action_bank_mutasi"/>
        </record>
        

       	<menuitem id="bank_reconcile_submenu" name ="Bank Reconcile" parent="wtc_dealer_menu.backoffice_top_menu" sequence="15"/>

       	<menuitem id="teds_import_bank_mutasi_menuitem"  parent="bank_reconcile_submenu" action="action_import_bank_mutasi" sequence="10"/> 	
       	<menuitem id="teds_import_bank_mutasi_2_menuitem"  parent="bank_reconcile_submenu" action="action_import_bank_mutasi_2" sequence="10"/> 	
       	<menuitem id="teds_bank_mutasi_menuitem" parent="bank_reconcile_submenu" action="action_bank_mutasi" sequence="20"/> 	
	</data>
</openerp>