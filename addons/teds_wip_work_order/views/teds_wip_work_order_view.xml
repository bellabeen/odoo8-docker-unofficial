<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		<record id="view_teds_wip_work_order_tree" model="ir.ui.view">
			<field name="name">teds.wip.work.order.tree</field>
			<field name="model">teds.wip.work.order</field>
			<field name="arch" type="xml">
				<tree>
					<field name="name"/>
					<field name="branch_id"/>
					<field name="date"/>
					<field name="qty_wip"/>
					<field name="state"/>
				</tree>
			</field>
		</record>
		
		<record id="view_teds_wip_work_order_form" model="ir.ui.view">
			<field name="name">teds.wip.work.order.form</field>
			<field name="model">teds.wip.work.order</field>
			<field name="arch" type="xml">
				<form>
					<header>
						<button name="action_get_wip" attrs="{'invisible':[('generate_date','!=',False)]}" string="Get WIP" class="oe_highlight" type="object"/>
						<button name="action_rfa" attrs="{'invisible':['|',('generate_date','=',False),('state','!=','draft')]}" string="RFA" class="oe_highlight" type="object" groups="teds_wip_work_order.group_wip_rfa_button" confirm="Harap pastikan kembali data  WIP sudah benar dan jika ada WIP yang tidak tercatat disistem sudah di input dan sesuai !"/>
						<button name="action_approved" states="waiting_for_approval" string="Approved" class="oe_highlight" type="object" groups="teds_wip_work_order.group_wip_approved_button"/>
						<button name="action_reject" states="waiting_for_approval" string="Reject" type="object" groups="teds_wip_work_order.group_wip_reject_button"/>
						<button name="action_confirm" states="approved" string="Confirm" class="oe_highlight" type="object" groups="teds_wip_work_order.group_wip_confirm_button"/>
						<field name="state" widget="statusbar" statusbar_visible="draft,waiting_for_approval,approved,done"/>
					</header>
					<sheet>
	                    <div class="oe_title">                      
		                    <h1>
		                        <field name="name" readonly="1"/>
		                    </h1>
	                    </div>
						<group>
							<group>
								<field name="branch_id" required="1" attrs="{'readonly':[('name','!=',False)]}" options="{'no_open':True,'no_create':True}"/>
								<field name="qty_wip" readonly="1"/>
							</group>
							<group>
								<field name="date" readonly="1"/>
								<field name="generate_date" attrs="{'invisible':[('generate_date','=',False)]}" readonly="1"/>
							</group>
						</group>
						<notebook>
							<page string="Detail WIP">
								<field name="detail_ids" nolabel="1">
									<tree editable="bottom" create="false" delete="false">
										<field name="wo_id" options="{'no_open':True,'no_create':True}" readonly="1"/>
										<field name="tgl_wo" readonly="1"/>
										<field name="aging" readonly="1"/>
										<field name="no_polisi" readonly="1"/>
										<field name="state_wo" readonly="1"/>
										<field name="status_wo" readonly="1"/>
										<field name="type_wo" readonly="1"/>
										<field name="fisik_motor" required="1" attrs="{'readonly':[('status_validasi','!=','draft')]}"/>
										<field name="keterangan" required="1" attrs="{'readonly':[('status_validasi','!=','draft')]}"/>
										<field name="status_validasi" invisible="1"/>
										<field name="is_validasi_adh" groups="teds_wip_work_order.group_wip_validasi" attrs="{'readonly':[('status_validasi','=','done')],'required':[('status_validasi','=','open')]}"/>
									</tree>
								</field>
							</page>
							<page string="WIP tidak tercatat di Sistem">
								<field name="other_ids" attrs="{'readonly':[('state','in',('approved','done'))]}">
									<tree editable="bottom">
										<field name="tgl_wo" required="1" attrs="{'readonly':[('status_validasi','!=','draft')]}"/>
										<field name="aging" invisible="1"/>
										<field name="aging_show"/>
										<field name="no_polisi" required="1" attrs="{'readonly':[('status_validasi','!=','draft')]}"/>
										<field name="type_wo" required="1" attrs="{'readonly':[('status_validasi','!=','draft')]}"/>
										<field name="fisik_motor" required="1" attrs="{'readonly':[('status_validasi','!=','draft')]}"/>
										<field name="keterangan" required="1" attrs="{'readonly':[('status_validasi','!=','draft')]}"/>
										<field name="status_validasi" invisible="1"/>
										<field name="is_validasi_adh" groups="teds_wip_work_order.group_wip_validasi" attrs="{'readonly':[('status_validasi','=','done')],'required':[('status_validasi','=','open')]}"/>
									</tree>
								</field>
							</page>
							<page string="Audit Trail">
								<group>
									<group>
										<field name="create_uid" readonly="1"/>
										<field name="create_date" readonly="1"/>
										<field name="approve_uid" readonly="1" attrs="{'invisible':[('approve_uid','=',False)]}"/>
										<field name="approve_date" readonly="1" attrs="{'invisible':[('approve_date','=',False)]}"/>
									</group>
									<group>							
										<field name="write_uid" readonly="1"/>
										<field name="write_date" readonly="1"/>
										<field name="confirm_uid" readonly="1" attrs="{'invisible':[('confirm_uid','=',False)]}"/>
										<field name="confirm_date" readonly="1" attrs="{'invisible':[('confirm_date','=',False)]}"/>
									</group>
								</group>
							</page>		          
						</notebook>
					</sheet>
				</form>
			</field>
		</record>

		<record id="action_teds_wip_work_order" model="ir.actions.act_window">
        	<field name="name">WIP</field>
			<field name="res_model">teds.wip.work.order</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>

		<menuitem id="teds_wip_work_order_menuitem" action="action_teds_wip_work_order" parent="wtc_dealer_menu.workshop_sales_menu" sequence="100"/>

	</data>
</openerp>
