<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id='view_teds_lead_tree' model='ir.ui.view'>
            <field name='name'>teds.lead.tree</field>
            <field name='model'>teds.lead</field>
            <field name='arch' type='xml'>
            	<tree>
            		<field name="name"/>
            		<field name="name_customer"/>
            		<field name="mobile"/>
            		<field name="date"/>
            		<field name="state"/>
            	</tree>
            </field>
        </record>
        <record id='view_teds_lead_form' model='ir.ui.view'>
            <field name='name'>teds.lead.form</field>
            <field name='model'>teds.lead</field>
            <field name='arch' type='xml'>
            	<form>
            		<header>
                        <button name="action_activity" type="object" string="Activity" attrs="{'invisible':['|',('state','!=','open'),('create_date','=',False)]}"/>
                        <button name="action_deal" type="object" string="Deal" class="oe_highlight" attrs="{'invisible':['|',('state','!=','open'),('minat','!=','hot')]}"/>
                        <!-- <button name="update_otr" type="object" string="Update OTR" states="open"/> -->
                        <button name="action_detail_spk" type="object" class="oe_highlight" attrs="{'invisible':[('spk_id','=',False)]}" string="SPK"/>
                        <field name="state" widget="statusbar" statusbar_visible="open,dealt"/>
            		</header>
            		<sheet>
            			<div class="oe_title">
                            <h1>
                                <label string="Buku Tamu" attrs="{'invisible':[('name','!=',False)]}"/>
                                <field name="name" readonly="1"/> 
                            </h1>
                            <label string="No Refrence"/>
                            <field name="no_refrence" readonly="1"/>
                        </div>
        				<group>
        					<group>
                                <field name="create_date" invisible="1"/>
                                <field name="spk_id" invisible="1"/>
        						<field name="branch_id" options="{'no_open':True,'no_create':True}" required="1" attrs="{'readonly':[('name','!=',False)]}"/>
			            		<field name="name_customer" required="1" attrs="{'readonly':[('state','!=','open')]}"/>
			            		<field name="minat" required="1" attrs="{'readonly':[('state','!=','open')]}"/>
                                <field name="product_id" options="{'no_open':True,'no_create':True}" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/>
			            		<field name="no_ktp" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/>
			            		<field name="mobile" required="1" attrs="{'readonly':[('state','!=','open')]}"/>
								<field name="kontak_tambahan" attrs="{'readonly':[('state','!=','open')]}"/>
                                <field name="customer_id" options="{'no_open':True,'no_create':True}" attrs="{'invisible':[('customer_id','=',False)]}" readonly="1"/>
			            	</group>
			            	<group>
		            			<field name="date" readonly="1"/>
                                <field name="employee_id" options="{'no_open':True,'no_create':True}" required="1" attrs="{'readonly':[('state','!=','open')]}" domain="[('branch_id','=',branch_id),('job_id.sales_force','in',('salesman','sales_counter','sales_partner','soh','sales_koordinator'))]"/>
                                <field name="sales_koordinator_id" options="{'no_open':True,'no_create':True}" attrs="{'readonly':[('state','!=','open')]}" domain="[('branch_id','=',branch_id),('job_id.sales_force','in',('soh','sales_koordinator'))]"/>
                                <field name="next_activity_id" options="{'no_open':True,'no_create':True}" readonly="1"/>
                                <field name="follow_ke" readonly="1"/>
		            			<field name="jaringan_penjualan" required="1"/>
								<field name="sumber_penjualan_id" attrs="{'invisible':[('jaringan_penjualan','not in',('Showroom','POS'))],'required':[('jaringan_penjualan','in',('Showroom','POS'))]}" options="{'no_open':True,'no_create':True}"/>
								<field name="is_btl" invisible="1"/>
								<field name="activity_plan_id" attrs="{'invisible':[('is_btl','=',False)],'required':[('is_btl','!=',False)]}" options="{'no_open':True,'no_create':True}"/>
                                <field name="sales_source_location_id" options="{'no_create': True,'no_open':True}" class="oe_inline" attrs="{'invisible': ['|',('jaringan_penjualan','!=','POS'),('is_btl','!=',False)],'required': [('jaringan_penjualan','=','POS'),('is_btl','=',False),('state','=','draft')],'readonly': [('state','!=','draft')]}" domain="[('branch_id','=',branch_id),('jenis','=','pos'),('start_date','&lt;=',time.strftime('%Y-%m-%d %H:%M:%S')),('end_date','&gt;=',time.strftime('%Y-%m-%d %H:%M:%S'))]" />
								<field name="titik_keramaian_id" invisible="1"/>
								<field name="data_source" readonly="1"/>
		            		</group>

		            		<group string="Alamat Sesuai KTP">
		            			<field name="street" placeholder="Alamat..." required="1" attrs="{'readonly':[('state','!=','open')]}"/>
                                <label for="rt" string="RT/RW"/>
                                <div>                               
                                    <field name="rt" placeholder="RT" style="width: 25%%" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/>
                                    <field name="rw" placeholder="RW" style="width: 25%%" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/>
                                </div>
                                <field name="state_id" string="Provinsi" options="{'no_open': True,'no_create': True}" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/>
                                <field name="kabupaten_id" string="Kab / Kota" options="{'no_open': True,'no_create': True}" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/>
                                <label for="kecamatan_id" string="Kecamatan"/>
                                <div>
                                    <field name="kecamatan_id" placeholder="Kecamatan" options="{'no_open': True,'no_create': True}" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/>
                                    <field name="kecamatan" placeholder="Kecamatan" attrs="{'required':[('kecamatan_id','!=',False)],'readonly':[('state','!=','open')]}"/>
                                </div> 
                                <label for="zip_code_id" string="Kelurahan"/>
                                <div>                   
                                    <field name="zip_code_id" placeholder="Kelurahan" options="{'no_open': True,'no_create': True}" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/> 
                                    <field name="kelurahan" placeholder="Kelurahan" attrs="{'required':[('zip_code_id','!=',False)],'readonly':[('state','!=','open')]}"/>
                                </div>
                                <field name="kode_pos" string="Kode Pos" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/>
		            		</group>
		            		<group string="Alamat Domisili / Survei">
		            			<field name="is_sesuai_ktp" string="Sesuai alamat KTP" required="1"/>
                                <field name="street_domisili" placeholder="Alamat..." attrs="{'readonly':[('state','!=','open')]}"/>
                                <label for="rt_domisili" string="RT/RW"/>
                                <div>                               
                                    <field name="rt_domisili" placeholder="RT" style="width: 25%%" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/>
                                    <field name="rw_domisili" placeholder="RW" style="width: 25%%" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/>
                                </div>
                                <field name="state_domisili_id" string="Provinsi" options="{'no_open': True,'no_create': True}" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/>
                                <field name="kabupaten_domisili_id" string="Kab / Kota" options="{'no_open': True,'no_create': True}" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/>
                                <label for="kecamatan_domisili_id" string="Kecamatan" />
                                <div>
                                    <field name="kecamatan_domisili_id" placeholder="Kecamatan" options="{'no_open': True,'no_create': True}" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/>
                                    <field name="kecamatan_domisili" placeholder="Kecamatan" attrs="{'required':[('kecamatan_domisili_id','!=',False)],'readonly':[('state','!=','open')]}"/>  
                                </div> 
                                <label for="zip_code_domisili_id" string="Kelurahan"/>
                                <div>                   
                                    <field name="zip_code_domisili_id" placeholder="Kelurahan" options="{'no_open': True,'no_create': True}" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/> 
                                    <field name="kelurahan_domisili" placeholder="Kelurahan" attrs="{'required':[('zip_code_domisili_id','!=',False)],'readonly':[('state','!=','open')]}"/>
                                </div>
                                <field name="kode_pos_domisili" string="Kode Pos" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/>
		            		</group>

		            		<group string="Data Konsumen">
								<label for="tempat_tgl_lahir" string="Tempat/Tgl Lahir"/>
                                <div>                   
                                    <field name="tempat_tgl_lahir" placeholder="Tempat Kelahiran" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/> 
                                    <label string="/"/>
                                    <field name="tgl_lahir" placeholder="Tanggal Lahir" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/>
                                </div>
                                <field name="jenis_kelamin_id" required="1" options="{'no_open':True,'no_create':True}" attrs="{'readonly':[('state','!=','open')]}"/>								
                                <field name="no_wa" attrs="{'readonly':[('state','!=','open')]}"/>
								<field name="no_kk" attrs="{'readonly':[('state','!=','open')]}"/>
								<field name="agama_id" options="{'no_open':True,'no_create':True}" attrs="{'readonly':[('state','!=','open')]}"/>
								<field name="gol_darah" options="{'no_open':True,'no_create':True}" attrs="{'readonly':[('state','!=','open')]}"/>
								<field name="pendidikan_id" options="{'no_open':True,'no_create':True}" attrs="{'readonly':[('state','!=','open')]}"/>
								<field name="pekerjaan_id" options="{'no_open':True,'no_create':True}" attrs="{'readonly':[('state','!=','open')]}"/>
								<field name="pengeluaran_id" options="{'no_open':True,'no_create':True}" attrs="{'readonly':[('state','!=','open')]}"/>
								<field name="hobi" options="{'no_open':True,'no_create':True}" attrs="{'readonly':[('state','!=','open')]}"/>
								<field name="status_hp_id" options="{'no_open':True,'no_create':True}" attrs="{'readonly':[('state','!=','open')]}"/>
								<field name="status_rumah_id" options="{'no_open':True,'no_create':True}" attrs="{'readonly':[('state','!=','open')]}"/>
                                <field name="motor_sekarang" attrs="{'readonly':[('state','!=','open')]}"/>
		            		</group>
		            		<group string="Data Pembelian">
								<field name="payment_type" attrs="{'required':[('minat','in',('hot','medium'))],'readonly':[('state','!=','open')]}"/>
								<field name="finco_id" attrs="{'invisible':[('payment_type','!=','2')],'required':[('payment_type','=','2')],'readonly':[('state','!=','open')]}" options="{'no_open':True,'no_create':True}"/>
								<field name="uang_muka" attrs="{'invisible':[('payment_type','!=','2')],'required':[('payment_type','=','2')],'readonly':[('state','!=','open')]}"/>
								<field name="tgl_uang_muka" attrs="{'invisible':[('payment_type','!=','2')],'required':[('payment_type','=','2')],'readonly':[('state','!=','open')]}"/>
                                <field name="date_jatuh_tempo" attrs="{'invisible':[('payment_type','!=','2')],'readonly':[('state','!=','open')]}"/>
								<field name="tenor" attrs="{'invisible':[('payment_type','!=','2')],'required':[('payment_type','=','2')],'readonly':[('state','!=','open')]}"/>
								<field name="cicilan" attrs="{'invisible':[('payment_type','!=','2')],'required':[('payment_type','=','2')],'readonly':[('state','!=','open')]}"/>
								<field name="otr_show" readonly="1"/>
								<field name="otr" invisible="1"/>
                                <field name="is_hc" attrs="{'readonly':[('state','!=','open')]}"/>
								<field name="diskon_hc" attrs="{'readonly':[('state','!=','open')]}"/>
                                <field name="diskon" attrs="{'readonly':[('state','!=','open')]}"/>
								<field name="atas_nama_stnk" attrs="{'required':[('minat','=','hot')],'readonly':[('state','!=','open')]}"/>
								<field name="customer_stnk_id" context="{'form_view_ref':'teds_lead.view_res_customer_lead_form','default_customer':1,'default_branch_id':branch_id}" attrs="{'invisible':[('atas_nama_stnk','!=','orang_lain')],'required':[('atas_nama_stnk','=','orang_lain')],'readonly':[('state','!=','open')]}" domain="[('customer','=',True)]"/>
							</group>
		            		<group string="Media Sosial">
		            			<field name="email" attrs="{'readonly':[('state','!=','open')]}"/>
		            			<field name="facebook" attrs="{'readonly':[('state','!=','open')]}"/>
								<field name="instagram" attrs="{'readonly':[('state','!=','open')]}"/>
								<field name="twitter" attrs="{'readonly':[('state','!=','open')]}"/>
								<field name="youtube" attrs="{'readonly':[('state','!=','open')]}"/>
							
		            		</group>
		            	</group>
                        <notebook>
                            <page string='Activities'>
                                <field name='lead_activity_ids' readonly='1'>
                                    <tree>
                                        <field name='date'/>
                                        <field name='name' string='Stage'/>
                                        <field name='stage_result_id'/>
                                        <field name='minat'/>
                                        <field name='remark'/>
                                        <field name='write_uid'/>
                                    </tree>
                                    <form>
                                        <sheet>
                                            <group colspan="4" col="4">
                                                <field name="name" options="{'no_open':True,'no_create':True}"/>
                                                <field name="date"/>
                                            </group>
                                        </sheet>
                                    </form>
                                </field>
                            </page>
                        </notebook>
			        </sheet>
			    </form>
            </field>
        </record>

        <record id="view_teds_lead_search" model="ir.ui.view">
            <field name="name">teds.lead.search</field>
            <field name="model">teds.lead</field>
            <field name="arch" type="xml">
                <search string="Search">
                    <field name='branch_id'/>
                    <field name="name" string="No Buku Tamu"/>
                    <field name="name_customer"/>
                    <field name="no_ktp"/>
                    <field name="customer_id"/>
                    <field name="mobile"/>
                    <field name="product_id"/>
                    <filter name="state_open" string="Open" domain="[('state','=','open')]"/>
                    <filter name="state_deal" string="Deal" domain="[('state','=','dealt')]"/>
                    <filter name="state_cancel" string="Cancel" domain="[('state','=','cancel')]"/>                    
                    <group expand="0" string="Group By...">
                        <filter name="group_by_sales_id"
                            string="Sales"
                            domain="[]" context="{'group_by':'employee_id'}"/>
                        <filter name="group_by_branch"
                            string="Branch"
                            domain="[]" context="{'group_by':'branch_id'}"/>
                        <filter name="group_by_state"
                            string="State"
                            domain="[]" context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>       

      	<record id="action_teds_lead" model="ir.actions.act_window">
            <field name="name">Buku Tamu</field>
            <field name="res_model">teds.lead</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem id="teds_lead_menuitem" parent="wtc_dealer_menu.showroom_sales_menu" action="action_teds_lead" sequence="1"/>
       
    </data>
</openerp>