<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>  

	<record model="ir.ui.view" id="wtc_reason_reject_wizard_dso_form_view">
		    <field name="name">wtc_reason.reject.wizard.dso.form</field>
		    <field name="model">dealer.sale.order.reason.reject.approval.so</field>
		    <field name="arch" type="xml">
		        <form string="REASON" version="7.0">
		            <group>
		                <field name="reason"/>
		            </group>
		            <footer>
		                <button name="wtc_reject_approval" string="Reject" type="object" class="oe_highlight"/>
		                or
		                <button string="Cancel" class="oe_link" special="cancel" />
		            </footer>
		        </form>
		    </field>
		</record>
		
		
	<record model="ir.actions.act_window" id="wtc_reason_reject_wizard_dso_action">
	    <field name="name">Reason Reject Sales Order</field>
	    <field name="res_model">dealer.sale.order.reason.reject.approval.so</field>
	    <field name="view_type">form</field>
	    <field name="view_mode">form</field>
	    <field name="target">new</field>
	</record>
	    	
	<record id="wtc_approval_dso_form_view" model="ir.ui.view">
		<field name="name">wtc.approval.dso.form</field>
		<field name="model">dealer.sale.order</field>
		<field name="inherit_id" ref="dealer_sale_order.sale_order_dealer_form"/>
		<field name="arch" type="xml">
			<field name="state" position="before">
				<button name="approval_request" states="draft" string="RFA" type="workflow" class="oe_highlight" confirm="Direct gift sudah ditarik ?" groups="dealer_sale_order.group_rfa_dso"/>	
				<button name="approval_approve" states="waiting_for_approval" string="Approve" type="workflow" class="oe_highlight"/>
				<button name="%(wtc_approval.wtc_approval_reject_wizard_action)d" states="waiting_for_approval" string="Reject" type="action" context="{'model_name':'dealer.sale.order','next_workflow':'approval_reject'}"/>
				<button name="%(wtc_approval.wtc_approval_cancel_wizard_action)d" states="waiting_for_approval" string="Cancel Approval" type="action" context="{'model_name':'dealer.sale.order','next_workflow':'approval_cancel'}"/>
				<button name="%(wtc_approval.wtc_cancel_approval_wizard)d"  states="approved" string="Cancel Approval" type="action"  groups="dealer_sale_order.group_cancel_approval_dso" context="{'model_name':'dealer.sale.order','next_workflow':'approval_cancel_dso'}"/>	 																
								
			</field>
				
			<field name="alamat_kirim" position="after">
				<field name="approval_state"/>
			</field>
				
			<xpath expr="//page[@string='Summary Diskon']" position="after">
				<page string="Approval">
					<field name="approval_ids">
						<tree string="Approval" editable="bottom" create="false" edit="false" delete="false" >
							<field name="group_id" />
							<field name="branch_id"/>
							<field name="division"/>
							<field name="product_template_id"/>
							<field name="limit"/>
							<field name="sts"/>
							<field name="reason"/>
							<field name="pelaksana_id"/>
							<field name="tanggal"/>
						</tree>
					</field>
				</page>
				<page string="Audit Trail">
					<group>
						<group>
							<field name="create_uid" readonly="1"></field>
							<field name="create_date" readonly="1"></field>
							<field name="confirm_uid" readonly="1"></field>
							<field name="confirm_date" readonly="1"></field>
						</group>
						<group>							
							<field name="write_uid" readonly="1"></field>
							<field name="write_date" readonly="1"></field>
							<field name="cancelled_uid" readonly="1"></field>
							<field name="cancelled_date" readonly="1"></field>
						</group>
					</group>
				</page>	
			</xpath>
		</field>
	</record>
	  

	          
 	</data>
 </openerp>