<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data> 
    	
		<record model="ir.ui.view" id="reimbursed_tree_view">
		    <field name="name">wtc.reimbursed.tree.view</field>
		    <field name="model">wtc.reimbursed</field>
		    <field name="arch" type="xml">
		        <tree string="List Reimbursed Petty Cash">
		        	<field name="name"/>
		            <field name="branch_id"/>
					<field name="division"/>	            
		            <field name="journal_id"/>
		            <field name="date_request"/>
		            <field name="date_approve"/>
		            <field name="state"/>	            
		        </tree>
		     </field>
		</record>
		    	
		<record model="ir.ui.view" id="reimbursed_form_view">
		    <field name="name">wtc.reimbursed.form.view</field>
		    <field name="model">wtc.reimbursed</field>
		    <field name="arch" type="xml">		       	        	
				<form>
					<header>
						<button name="%(print_reimbursed_pc)d" string="Print" type="action" class="oe_highlight" states="request,approved,paid"/> 
						<button name="request" groups='wtc_pettycash.group_wtc_reimbursed_request' states="draft" string="Request" type="object" class="oe_highlight"/>
						<button name="approve" groups='wtc_pettycash.group_wtc_reimbursed_approve' states="request" string="Approve" type="object" class="oe_highlight"/>
						<button name="reject" groups='wtc_pettycash.group_wtc_reimbursed_reject' states="request" string="Reject" type="object"/>																				
						<button name="cancel" groups='wtc_pettycash.group_wtc_reimbursed_cancel' states="request" string="Cancel" type="object"/>							
						<button name="sent_to_draft" states="request,approved" string="Sent to Draft" type="object" groups='wtc_pettycash.group_wtc_reimbursed_sent_to_draft'/>				

						<field name="state" widget="statusbar" statusbar_visible="draft,request,approved,paid" statusbar_colors='{"request":"red","approved":"blue"}'/>	
	           		</header>
					<sheet>          							
			        	<div class="oe_title">
			        		<h2>
				                <label string="Reimbursed Petty Cash"/>    			
				 				<field name="name" class="oe_inline"/>
			 				</h2>
			        	</div>     
	                    <div class="oe_inline oe_right oe_button_box" name="get_pettycash">
	                        <button class="oe_inline oe_stat_button" name="button_pettycash_out"
	                                 string="Petty Cash-" type="object"
	                                attrs="{'invisible':[('state','in',['draft','cancel'])]}" icon="fa-list">
							<field name="pettycash_count" class="oe_inline" widget="statinfo" nolabel="1"/>
							</button>                    
	                    </div>			        	  
						<group col="2" colspan="2">   
							<group>
								<field name="branch_id" options="{'no_create': True,'no_open': True}" on_change="onchange_pettycash(branch_id,division,journal_id)" attrs="{'readonly': ['|',('state','!=','draft'),('name','!=',False)]}" />
							</group>            
						    <group>
	                    		<field name="division" required="1" on_change="onchange_pettycash(branch_id,division,journal_id)" attrs="{'readonly': [('state','!=','draft')]}" />
	                    	</group>
	                    	<group>
							    <field name="journal_id" required="1" on_change="onchange_pettycash(branch_id,division,journal_id)"  attrs="{'readonly': [('state','!=','draft')]}"/>								    	
				            	<field name="date_request" readonly="1"/> 
							    	
							</group>
				            <group> 
							    <field name="date_approve" readonly="1"/> 
							    <field name="date_cancel" readonly="1"/> 																	
							</group>   
						</group>	
						<notebook>
							<page string="Petty Cash">
			                    <field name="pettycash_ids" nolabel="1"  attrs="{'readonly': [('state','!=','draft')]}">
			                        <tree string="Petty Cash" edit="false" create="false" widget="one2many_list">
			                        	<field name="name"/>
			                        	<field name="date"/>
			                        	<field name="branch_destination_id"/>
			                            <field name="amount_real"/>	                            
			                        </tree>
			                    </field>	
								<group class="oe_subtotal_footer oe_right">
										<div class="oe_subtotal_footer_seperator oe_inline">
											<label for="amount_total"/>
											<button name="button_dummy"
									        states="draft" string="(update)" type="object" class="oe_edit_only oe_link"/>
										</div>
									<field name="amount_total" nolabel="1" class="oe_subtotal_footer_separator" widget='monetary' />
								</group>
								<div class="oe_clear"/>	  
							</page>
							<page string="Audit Trail">
								<group>
									<group>
										<field name="create_uid" readonly="1"></field>
										<field name="create_date" readonly="1"></field>
										<field name="confirm_uid" readonly="1"></field>
										<field name="confirm_date" readonly="1"></field>
									</group>
									<group>							
										<field name="write_uid" readonly="1"></field>
										<field name="write_date" readonly="1"></field>
										<field name="cancel_uid" readonly="1"></field>
										<field name="cancel_date" readonly="1"></field>
									</group>
								</group>
							</page>							
						</notebook>	                  				
					</sheet>
	                <div class="oe_chatter">
	                    <field name="message_follower_ids" widget="mail_followers"/>
	                    <field name="message_ids" widget="mail_thread"/>
	                </div>						
				</form>	
		    </field>
		</record>
		
 		<record id="view_reimbursed" model="ir.ui.view">
            <field name="name">reimbursed.list.select</field>
            <field name="model">wtc.reimbursed</field>
            <field name="arch" type="xml">
                <search string="Search Reimbursed Petty Cash">
                    <field name="name" string="Reference"/>
                    <field name="branch_id"/> 
                    <field name="division"/> 
                    <field name="journal_id"/> 
                    <group expand="0" string="Group By">
                        <filter string="Branch" icon="terp-partner" domain="[]" context="{'group_by':'branch_id'}"/>
                        <filter string="Date" icon="terp-go-month" domain="[]" context="{'group_by':'date_request'}"/>                    
                    </group>
                </search>
            </field>
        </record>		
		<record model="ir.actions.act_window" id="reimbursed_action">
		    <field name="name">Reimbursed Petty Cash</field>
		    <field name="res_model">wtc.reimbursed</field>
		    <field name="view_type">form</field>
		    <field name="view_mode">tree,form</field>
		    <field name="search_view_id" ref="view_reimbursed"/>
		</record>
					
		<menuitem id="reimbursed_submenu" name="Reimbursed Petty Cash" parent="wtc_dealer_menu.backoffice_bankandcash_menu"  action="reimbursed_action" sequence="3"/> 		
		
	</data>
</openerp>
															