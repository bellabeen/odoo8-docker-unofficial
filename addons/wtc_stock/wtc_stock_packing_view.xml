<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
	
	<!-- Stock Packing -->
	
	<record model="ir.ui.view" id="view_wizard_eksport_distribution">
            <field name="name">view.wizard.eksport.distribution</field>
            <field name="model">eksport.distribution</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form col="4" string="Eksport Distribution Wizard" version="7.0">
                    <group>
                        
                        <field name="name" invisible="True"/>
                        <group col="2" colspan="2">
	                    <group>
	                        <field name="date_start"/>
	                    </group>
	                    <group>
	                       	 <field name="date_end"/>
	                    </group>
                    </group>
                        <separator colspan="4"/>
                        <field name="data_file" nolabel="1" colspan="4" filename="name"/>
                    </group>
                    <footer>
                        <button name="export_file" string="Export Surat Jalan" type="object" class="oe_highlight"/>
                        <button name="export_file_picking" string="Export Picking" type="object" class="oe_highlight"/>
                        or 
                        <button string="Cancel" class="oe_link" special="cancel" />
                    </footer>
                </form>
            </field>
        </record>
        
        <record model="ir.actions.act_window" id="action_export_distribution">
            <field name="name">Import Object</field>
            <field name="res_model">eksport.distribution</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>
        
	<record id="wtc_stock_packing_wizard_print_view" model="ir.ui.view">
            <field name="name">wtc.stock.packing.wizard.print</field>
            <field name="model">wtc.stock.packing</field>
            <field name="arch" type="xml">
                <form string="Packing Print">
           			<button name="%(report_bukti_penerimaan)d" string="Print Bukti Penerimaan" type="action" class="oe_highlight"/>  
           			<button name="%(report_packing_surat_jalan)d" string="Print Surat Jalan" type="action" class="oe_highlight"/> 
           			<button name="%(report_picking_bastk)d" string="BASTK" type="action" class="oe_highlight"/>
                </form>
            </field>
        </record>
        
        <record id="view_wtc_stock_packing_search" model="ir.ui.view">
            <field name="name">wtc.stock.packing.search</field>
            <field name="model">wtc.stock.packing</field>
            <field name="arch" type="xml">
                <search string="Search Good Receipt Note">
        			<field name='name'/>
        			<field name='rel_branch_id'/>
        			<field name='rel_division'/>
        			<field name='picking_id'/>
        			<field name='rel_picking_type_id'/>
        			<field name='rel_partner_id'/>
        			<field name='expedition_id'/>
        			<field name='rel_serial_number_id'/>
                    <group expand="0" string="Group By">
                        <filter string="Branch" icon="terp-go-month" domain="[]" context="{'group_by':'branch_id'}"/>
                    </group>
                </search>
            </field>
        </record>
        
		<record model="ir.ui.view" id="wtc_stock_packing_tree_view">
		    <field name="name">wtc.stock.packing.tree</field>
		    <field name="model">wtc.stock.packing</field>
		    <field name="arch" type="xml">
		        <tree string="Stock Packing" create="false">
		            <field name="name"/>
		            <field name="rel_branch_id"/>
		            <field name="rel_division"/>
		            <field name="picking_id"/>
		            <field name="rel_picking_type_id"/>
		            <field name="rel_source_location_id"/>
		            <field name="rel_destination_location_id"/>
		            <field name="state"/>
		        </tree>
		     </field>
		</record>
		
		<record model="ir.ui.view" id="wtc_stock_packing_form_view">
		    <field name="name">wtc.stock.packing.form</field>
		    <field name="model">wtc.stock.packing</field>
		    <field name="arch" type="xml">
		    	
		    	<form string="Stock Packing" create="false">
		    		<header>
		    			<button name="post" string="Post" type="object" class="oe_highlight" attrs="{'invisible':[('state','!=','draft')]}" groups="wtc_stock.group_stock_packing_post"/>
		    			<button name="action_cancel" states="draft" string="Cancel" type="object" confirm="Apa anda yakin ingin membatalkan transaksi ini ?" groups="wtc_stock.group_stock_packing_cancel"/>
		    			<button name="renew_available_and_reserved" string="Renew Stock" type="object" class="oe_highlight" attrs="{'invisible':['|',('state','!=','draft'),'&amp;',('is_reverse','=',False),('rel_code','in',['incoming','interbranch_in'])]}" groups="wtc_stock.group_stock_packing_renew_stock"/>
		    			<button name="print_wizard" states="posted" string="Print" type="object"  class="oe_highlight" groups="wtc_stock.group_stock_packing_print_wizard"/>
		    			<button name="%(print_serial_number)d" string="Print Serial Number" type="action" class="oe_highlight"  groups="wtc_stock.group_stock_packing_print_lot" attrs="{'invisible':['|','|','|','|',('state','in',['posted','cancelled']),('is_reverse','!=',False),('rel_code','in',['incoming','interbranch_in']),('rel_division','in',['Sparepart','Umum']),('rel_branch_type','=','DL')]}"/>
		    			
		    			<field name="state" widget="statusbar" statusbar_visible="draft,posted" statusbar_colors='{"draft":"red","posted":"blue"}'/>
		    		</header>
		    		<sheet>
		    			<div class="oe_title">
		       				<h1>
					            <label string="Stock Packing"/>
					 			<field name="name" class="oe_inline" readonly="1"/>
		    			    </h1>
	                    </div>
			    		<group col="4">
				            <field name="rel_branch_id" readonly="1"/>
				            <field name="rel_division" readonly="1"/>
				            <field name="picking_id" readonly="1"/>
				            <field name="rel_picking_type_id" readonly="1"/>
							<field name="date" readonly="1"/>
				            <field name="branch_sender_id" readonly="1" attrs="{'invisible':[('rel_code','!=','interbranch_in')]}"/>
			    			<field name="rel_source_location_id" invisible="1"/>
			    			<field name="rel_destination_location_id" invisible="1"/>
			    			<field name="rel_code" invisible="1"/>
			    			<field name="rel_branch_type" invisible="1"/>
			    			<field name="rel_origin" readonly="1"/>
			    			<field name="rel_partner_id" readonly="1"/>
			    			<field name="nrfs_location" attrs="{'readonly':[('state','!=','draft')]}" domain="[('usage','=','nrfs'),('branch_id','=',rel_branch_id)]" options="{'no_open':True,'no_create':True}"/>
			    			<field name="expedition_id" attrs="{'readonly':[('state','!=','draft')], 'required':[('rel_code','=','incoming'), ('rel_branch_type','=','MD'), ('is_reverse','=',False)]}" domain="[('forwarder','=',True)]" options="{'no_open':True,'no_create':True}"/>
			    			<field name="plat_number_id" attrs="{'readonly':[('state','!=','draft')]}" domain="[('partner_id','=',expedition_id)]" options="{'no_open':True,'no_create':True}"/>
			    			<field name="driver_id" attrs="{'readonly':[('state','!=','draft')]}" domain="[('partner_id','=',expedition_id)]" options="{'no_open':True,'no_create':True}"/>
			    			<field name="is_reverse" invisible="1"/>
						</group>
						<notebook>
							
							
							<!-- 5 reverse-incoming-unit-dealer, reverse-outgoing-unit-dealer, reverse-outgoing-unit-maindealer -->
							<page string="Packing Line" attrs="{'invisible':['|', '|', ('rel_code','in',['interbranch_out','interbranch_in']), ('rel_division','in',['Sparepart','Umum']), ('is_reverse','=',False)]}">
		                        <field colspan="4" name="packing_line5" nolabel="1" widget="one2many_list" attrs="{'readonly':[('state','!=','draft')]}">
		                            <tree string="Request Line" editable="bottom">
		                            	<field name="product_id" domain="[('id','=',0)]" required="1" options="{'no_open':True,'no_create':True}"/>
		                            	<field name="rel_source_location_id" invisible="0"/>
						                <field name="rel_destination_location_id" invisible="0"/>
						                <field name="source_location_id" options="{'no_open':True,'no_create':True}" domain="[('id','child_of',rel_source_location_id),('usage','!=','view')]" invisible="1"/>
			    						<field name="destination_location_id" options="{'no_open':True,'no_create':True}" domain="[('id','child_of',rel_destination_location_id),('usage','!=','view'), ('maximum_qty', '!=', 0), ('end_date','&gt;=',context_today().strftime('%%Y-%%m-%%d')), ('start_date','&lt;=',context_today().strftime('%%Y-%%m-%%d'))]" invisible="1"/>
		                            	<field name="serial_number_id" domain="[('id','=',0)]" options="{'no_open':True,'no_create':True}" attrs="{'required':[('rel_code','in',['outgoing']),('rel_division','=','Unit'),('rel_is_reverse','=',True)]}"/>
						                <field name="rel_division" invisible="1"/>
						                <field name="rel_code" invisible="1"/>
						                <field name="rel_branch_type" invisible="1"/>
						                <field name="rel_is_reverse" invisible="1"/>
						                <field name="engine_number" invisible="1"/>
						                <field name="chassis_number"/>
						                <field name="quantity" required="1"/>
						                <field name="ready_for_sale" invisible="1"/>
						                <field name="rel_ready_for_sale" attrs="{'readonly':[('rel_code','in',['outgoing','interbranch_out'])]}"/>
						                <field name="rel_tahun_pembuatan" readonly="1"/>
						                <field name="seharusnya" invisible="1"/>
						                <field name="rel_seharusnya" readonly="1"/>
						                <field name="current_reserved" invisible="1"/>
						                <field name="rel_current_reserved" readonly="1"/>
						                <field name="stock_available" invisible="1"/>
		                            </tree>
		                        </field>
							</page>
							<!-- 6 reverse-incoming-sparepart-dealer, reverse-incoming-umum-dealer, reverse-outgoing-sparepart-dealer, reverse-outgoing-umum-dealer, reverse-outgoing-sparepart-maindealer, reverse-outgoing-umum-maindealer, reverse-incoming-sparepart-maindealer, reverse-incoming-umum-maindealer -->
							<page string="Packing Line" attrs="{'invisible':['|', '|', ('rel_code','in',['interbranch_out','interbranch_in']), ('rel_division','=','Unit'), ('is_reverse','=',False)]}">
		                        <field colspan="4" name="packing_line6" nolabel="1" widget="one2many_list" attrs="{'readonly':[('state','!=','draft')]}">
		                            <tree string="Request Line" editable="bottom">
						                <field name="rel_division" invisible="1"/>
						                <field name="rel_code" invisible="1"/>
						                <field name="rel_branch_type" invisible="1"/>
						                <field name="product_id" domain="[('id','=',0)]" required="1" options="{'no_open':True,'no_create':True}"/>
						                <field name="rel_source_location_id" invisible="0"/>
						                <field name="rel_destination_location_id" invisible="0"/>
						                <field name="source_location_id" options="{'no_open':True,'no_create':True}" domain="[('id','child_of',rel_source_location_id),('usage','!=','view')]" invisible="1"/>
			    						<field name="destination_location_id" options="{'no_open':True,'no_create':True}" domain="[('id','child_of',rel_destination_location_id),('usage','!=','view'), ('maximum_qty', '!=', 0), ('end_date','&gt;=',context_today().strftime('%%Y-%%m-%%d')), ('start_date','&lt;=',context_today().strftime('%%Y-%%m-%%d'))]" invisible="1"/>
						                <field name="quantity" required="1"/>
						                <field name="seharusnya" invisible="1"/>
						                <field name="rel_seharusnya" readonly="1"/>
						                <field name="current_reserved" invisible="1"/>
						                <field name="rel_current_reserved" readonly="1"/>
						                <field name="stock_available" invisible="1"/>
		                            </tree>
		                        </field>
							</page>
							<!-- 7 incoming-unit-maindealer -->
							<page string="Packing Line" attrs="{'invisible':['|', '|', '|', ('rel_division','in',['Sparepart','Umum']), ('rel_branch_type','=','DL'), ('rel_code','in',['outgoing','interbranch_out','interbranch_in']), ('is_reverse','=',True)]}">
		                        <field colspan="4" name="packing_line7" nolabel="1" widget="one2many_list" attrs="{'readonly':[('state','!=','draft')]}">
		                            <tree string="Request Line" editable="bottom">
						                <field name="rel_division" invisible="1"/>
						                <field name="rel_code" invisible="1"/>
						                <field name="rel_branch_type" invisible="1"/>
						                <field name="rel_is_reverse" invisible="1"/>
						                <field name="serial_number_id" domain="[('id','=',0)]" options="{'no_open':True,'no_create':True}" attrs="{'required':[('rel_division','=','Unit'),('rel_code','=','incoming'),('rel_branch_type','=','MD'),('rel_is_reverse','=',False)]}"/>
						                <field name="engine_number" invisible="1"/>
						                <field name="chassis_number" attrs="{'required':[('rel_division','=','Unit'),('rel_code','=','incoming'),('rel_branch_type','=','MD'),('rel_is_reverse','=',False)]}"/>
						                <field name="product_id" domain="[('id','=',0)]" required="1" options="{'no_open':True,'no_create':True}"/>
						                <field name="rel_source_location_id" invisible="1"/>
						                <field name="rel_destination_location_id" invisible="1"/>
						                <field name="source_location_id" options="{'no_open':True,'no_create':True}" domain="[('id','child_of',rel_source_location_id),('usage','!=','view')]"/>
			    						<field name="destination_location_id" options="{'no_open':True,'no_create':True}" domain="[('id','child_of',rel_destination_location_id),('usage','!=','view'), ('maximum_qty', '!=', 0), ('end_date','&gt;=',context_today().strftime('%%Y-%%m-%%d')), ('start_date','&lt;=',context_today().strftime('%%Y-%%m-%%d'))]"/>
						                <field name="quantity" required="1"/>
						                <field name="tahun_pembuatan"/>
						                <field name="ready_for_sale"/>
						                <field name="seharusnya" invisible="1"/>
						                <field name="rel_seharusnya" invisible="1"/>
						                <field name="current_reserved" invisible="1"/>
						                <field name="stock_available" invisible="1"/>
						                <field name="performance_hpp" invisible="1"/>
						                <field name="freight_cost" invisible="1"/>
		                            </tree>
		                        </field>
							</page>
							
							<page string="Audit Trail">
								<group>
									<group>
										<field name="create_uid" readonly="1"></field>
										<field name="create_date" readonly="1"></field>
									</group>
									<group>							
										<field name="write_uid" readonly="1"></field>
										<field name="write_date" readonly="1"></field>
									</group>
								</group>
							</page>
						</notebook>
		    		</sheet>
		    	</form>
		    	
			</field>
		</record>
		
		<record model="ir.actions.act_window" id="wtc_stock_packing_action">
            <field name="name">Stock Packing</field>
            <field name="res_model">wtc.stock.packing</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{}</field>
            <field name="domain">[('rel_code','in',('incoming','interbranch_in'))]</field>
            <field name="search_view_id" ref="wtc_stock.view_wtc_stock_packing_search"/>
        </record>
        
        <record model="ir.actions.act_window.view" id="wtc_stock_packing_action_tree">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="wtc_stock_packing_tree_view"/>
            <field name="act_window_id" ref="wtc_stock_packing_action"/>
        </record>
        
        <record id="wtc_stock_packing_action_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="wtc_stock_packing_form_view"/>
            <field name="act_window_id" ref="wtc_stock_packing_action"/>
        </record>

         <record model="ir.actions.act_window" id="wtc_stock_packing_action_sales">
            <field name="name">Stock Packing</field>
            <field name="res_model">wtc.stock.packing</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{}</field>
            <field name="domain">[('rel_code','in',('outgoing','interbranch_out'))]</field>
            <field name="search_view_id" ref="wtc_stock.view_wtc_stock_packing_search"/>
        </record>
        
        <record model="ir.actions.act_window.view" id="wtc_stock_packing_action_tree_sales">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="wtc_stock_packing_tree_view"/>
            <field name="act_window_id" ref="wtc_stock_packing_action_sales"/>
        </record>
        
        <record id="wtc_stock_packing_action_form_sales" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="wtc_stock_packing_form_view"/>
            <field name="act_window_id" ref="wtc_stock_packing_action_sales"/>
        </record>
        
        <menuitem action="wtc_stock_packing_action" 
	        name="Good Receipt Note" 
	        id="wtc_stock_packing_menu_showroom_purchase"    	
	        parent="wtc_dealer_menu.showroom_purchase_menu" 
	       sequence="8"/>
        <menuitem action="wtc_stock_packing_action" 
	        name="Good Receipt Note" 
	        id="wtc_stock_packing_menu_workshop_purchase"    	
	        parent="wtc_dealer_menu.workshop_purchase_menu" 
	       sequence="8"/>		
        <menuitem action="wtc_stock_packing_action_sales" 
	        name="Delivery Note" 
	        id="wtc_stock_packing_menu_workshop_sales"    	
	        parent="wtc_dealer_menu.workshop_sales_menu" 
	        sequence="8"/>
        <menuitem action="wtc_stock_packing_action_sales" 
	        name="Delivery Note" 
	        id="wtc_stock_packing_menu_showroom_sales"    	
	        parent="wtc_dealer_menu.showroom_sales_menu" 
	        sequence="8"/>
	        
	     <menuitem action="action_export_distribution" 
	        name="Generate File Distribution" 
	        id="wtc_stock_packing_export_distribution"    	
	        parent="wtc_dealer_menu.showroom_sales_menu" 
	        sequence="9"/>
	        
	</data>
</openerp>