<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data> 
    	
		<record model="ir.ui.view" id="wtc_surat_jalan_tree_view">
		    <field name="name">wtc.surat.jalan.tree</field>
		    <field name="model">wtc.surat.jalan</field>
		    <field name="arch" type="xml">
		        <tree string="Surat Jalan MD">
		        	<field name="name"/>
					<field name="date"/>		        	
		            <field name="branch_id"/>
					<field name="division"/>		            
		            <field name="partner_id"/>	
		            <field name="state"/>	            
		        </tree>
		     </field>
		</record>
		    	
        <record model="ir.ui.view" id="wtc_surat_jalan_form_view">
            <field name="name">wtc.surat.jalan.form.view</field>
            <field name="model">wtc.surat.jalan</field>
            <field name="arch" type="xml">
                <form string="Suart Jalan">
                <header>
            		<button name='post_surat_jalan' class="oe_highlight" states='draft' type='object' string='Post'></button>            	
                    <button name="%(report_cetak_surat_jalan)d"  type="action" string="Print Surat Jalan" class="oe_highlight"  icon="gtk-print"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,posted" statusbar_colors='{"proforma":"blue"}'/>
                </header>
                <sheet string="Surat Jalan">
                    <h1><label for="name" string="Surat Jalan"/> <field name="name" class="oe_inline" readonly="1"/></h1>
                    <group>
                        <group>
                            <field name="branch_id" options="{'no_show':True,'no_create':True,'no_open':True}" required='1'/>
                        </group>
                        <group>
                            <field name="division" required="True" />
                        </group>
                    </group>                     
                    <group>
                        <group>
                            <field name="partner_id" options="{'no_show':True,'no_create':True,'no_open':True}" required='1' domain="['|',('dealer','!=',False),('branch','!=',False)]" string="Partner" />
                            <field name="picking_type_id"  options="{'no_show':True,'no_create':True,'no_open':True}" required='1' domain="[('code', 'in', ('outgoing','interbranch_out')),('branch_id','=',branch_id)]"/>
                        </group>
                        <group>
                            <field name="date" string="Date" readonly='1'/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Surat Jalan Lines">
                            <field name="surat_jalan_lines">
                                <tree string="Surat Jalan Lines" editable="bottom">
                                    <field name='packing_id' required="True" options="{'no_show':True,'no_create':True,'no_open':True}" domain="[('surat_jalan','=',False),('state','=','posted'),('rel_picking_type_id','=',parent.picking_type_id),('rel_partner_id','=',parent.partner_id)]"/>
                                	<field name="lot_id" required="True" options="{'no_show':True,'no_create':True,'no_open':True}"/>
                                    <field name="product_id" required="True" options="{'no_show':True,'no_create':True,'no_open':True}"/>
                                	 <field name="no_invoice" required="True"/>
                                </tree>
                            </field>
                        </page>
						<page string="Audit Trail">
							<group>
								<group>
									<field name="create_uid" readonly="1"></field>
									<field name="create_date" readonly="1"></field>
									<field name="post_uid" readonly="1"></field>
									<field name="post_date" readonly="1"></field>
								</group>
								<group>							
									<field name="write_uid" readonly="1"></field>
									<field name="write_date" readonly="1"></field>
									<field name="cancel_uid" readonly="1"></field>
									<field name="cancel_date" readonly="1"></field>
								</group>
							</group>
						</page>			                       
                    </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        <record model="ir.actions.act_window" id="wtc_surat_jalan_action">
		    <field name="name">Surat Jalan</field>
		    <field name="res_model">wtc.surat.jalan</field>
		    <field name="view_type">form</field>
		    <field name="view_mode">tree,form</field>
		</record>
		<menuitem id="wtc_surat_jalan_submenu" parent="wtc_dealer_menu.showroom_sales_menu"  action="wtc_surat_jalan_action" sequence="30"/> 				  
	</data>
</openerp>
			        
        
