<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>    

        <record id="view_purchase_asset_add" model="ir.ui.view">
            <field name="name">account.asset.category</field>
            <field name="model">account.asset.category</field>
            <field name="inherit_id" ref="account_asset.view_account_asset_category_form"/>
            <field name="arch" type="xml">
            	<field name="name" position="after">
            		<field name="code" required="1"/>
            		<field name="type" required="1"/>
					<field name="sequence_id" readonly='1'/>      
					<field name="is_cip"/>            		
				</field>  
				<field name="open_asset" position="after">
					<field name="first_day_of_month"/>
				</field>          		
            	<xpath expr="//form" position="inside">
            		<notebook>
						<page string="Audit Trail">
							<group>
								<group>
									<field name="create_uid" readonly="1"></field>
									<field name="create_date" readonly="1"></field>
								</group>
								<group>							
									<field name="write_uid" readonly="1"></field>
									<field name="write_date" readonly="1"></field>
								</group>
							</group>
						</page>
					</notebook>
				</xpath> 
            </field>
        </record>
        <record id="view_asset_asset_add" model="ir.ui.view">
            <field name="name">account.asset.asset</field>
            <field name="model">account.asset.asset</field>
            <field name="inherit_id" ref="account_asset.view_account_asset_asset_form"/>
            <field name="arch" type="xml">
		    	<xpath expr="/form/sheet/group" position="before">
		    		<group>
		    			<group>
			            	<field name="branch_id" options="{'no_open':True,'no_create':True}" required="1" attrs="{'readonly': [('state','not in','draft')]}"/>
			            </group>
			            <group>
							<field name="division" attrs="{'readonly': ['|',('state','not in','draft'),('name','!=','/')]}"/>
						</group>
					</group>		            
		    	</xpath>    
		    	<button name="set_to_draft" position="replace"></button>
		    	<button name="set_to_close" position="after">
                    <button name="set_to_draft" groups='wtc_purchase_asset.group_account_asset_asset_draft' states="open,close" string="Set to Draft" type="object" />		
                     <button name="set_to_cancel" groups='wtc_purchase_asset.group_account_asset_asset_draft' states="draft" string="Set to Cancel" type="object" />    				    		
		    	</button>
		        <field name="category_id" position="after">
		        	<field name="asset_classification_id" attrs="{'readonly': [('state','not in','draft')]}" options="{'no_open':True,'no_create':True}" ></field>
		        </field>  		    	   	
		        <field name="purchase_date" position="attributes">
		        	<attribute name="string">Effective Date</attribute>
		        </field>       
		        <field name="purchase_date" position="after">
		        	<field name="register_no" readonly='1'/>
		        </field>  		        
		        <button name="validate" position="attributes">
					<attribute name="groups">wtc_purchase_asset.groups_fix_asset_acc</attribute>
		        </button> 		   
		        <button name="set_to_close" position="attributes">
					<attribute name="groups">wtc_purchase_asset.groups_fix_asset_acc</attribute>
		        </button> 	
		        <button name="set_to_draft" position="attributes">
					<attribute name="groups">wtc_purchase_asset.groups_fix_asset_acc</attribute>
		        </button> 		        	                
		        <field name="code" position="replace"/>
		        <field name="name" position="before">
		        	<field name="code" readonly="1" class="oe_inline" style="width: 6em"/> - 
		        </field>	  
		        <field name="partner_id" position="replace"/>       	
				<field name="prorata" position="after">
					<field name="first_day_of_month" attrs="{'readonly': [('state','not in','draft')]}"/>
				</field> 		 
				<field name="method" position="attributes">
					<attribute name="groups">wtc_purchase_asset.groups_fix_asset_acc</attribute>
				</field>      
				<label for="method_time" position="replace"></label> 
				<field name="method_time" position="replace">
				</field>
				<field name="method" position="after">
					<field name="method_time" attrs="{'readonly': [('state','not in','draft')]}" groups="wtc_purchase_asset.groups_fix_asset_acc"></field>
					<label for="method_time" invisible="1" groups="wtc_purchase_asset.groups_fix_asset_acc"></label>
										
				</field>				 								
				<button name="535" position="attributes">
					<attribute name="invisible">1</attribute>
				</button> 		
				<field name="value_residual" position="after">
					<field name="real_purchase_value" widget="monetary" readonly="1"/>
					<field name="real_purchase_date" readonly="1"/>  
				</field>
				<field name="purchase_value" position="replace"/>
				<field name='salvage_value' position='before'>
					  <field name="purchase_value" attrs="{'invisible': [('state','in','draft')]}" widget="monetary" options="{'currency_field': 'currency_id'}" on_change="onchange_purchase_salvage_value(purchase_value, salvage_value)"/>
				</field>						        				
            	<xpath expr="//page[@string='General']" position="after">
						<page string="Other Info">
							<group>
							 	<field name="partner_id" domain="[('supplier','!=',False)]" string="Vendor" options="{'no_create':True}" attrs="{'readonly': [('state','not in','draft')]}"/>        			        																						
	       					 	<field name="product_id" options="{'no_create':True}" attrs="{'readonly': [('state','not in','draft')]}"/>        			        																	
	        	        		<field name="responsible_id" options="{'no_create':True}"  attrs="{'readonly': [('state','not in','draft')]}"/>        			        	
	        	        		<field name="cost_centre_id" readonly="1"/> 
	        	        		<field name="disposal_id" readonly="1"/>       			        			        								
							</group>
							<separator string="Purchase Info"/>
	        	        	<group>
	        	        		<field name="categ_type" invisible="1" />      	        		
					        	<field name="purchase_asset_id" readonly="1"/>		        				        	
					        	<field name="receive_id" readonly="1"/>
					        	<field name="invoice_id" readonly="1"/>
					        	<field name="po_value" attrs="{'readonly': [('state','not in','draft')]}"/>
								<field name="retensi" readonly='1'/>	
								<field name="amount_different" readonly='1'/>				        	
							</group>
							<group>
								<field name="do_number" readonly="1"/>
								<field name="do_date" readonly="1"/>
								<field name="lokasi_asset_id" options="{'no_create':True,'no_open':True}"/>
							</group>
							<separator string="Account"/>
							<group>
								<field name="account_asset_id"/>
                        		<field name="account_depreciation_id"/>
                        		<field name="account_expense_depreciation_id"/>
							</group>
						</page>  
				</xpath>
				<xpath expr="//page[@string='Notes']" position="after"> 
						<page string="Purchase Asset">
							<field name="purchase_asset_ids">
								<tree string="Purchase Asset" editable="bottom" create="false" edit="false" delete="false" >
                                    <field name='purchase_id'></field>
									<field name="asset_register_id"/>
                                    <field name="description"/>
                                    <field name="current_value"/>
                                    <field name="amount" />
                                    <field name="tax_id" widget="many2many_tags"/>
									<field name='price_subtotal' readonly='1'/>
									<field name='state'/>									
								</tree>
							</field>
						</page>
						<page string="History Adjustment">
							<field name="asset_adjustment_ids" readonly="1">
								<tree string="History Adjustment" editable="bottom" create="false" edit="false" delete="false">
                                    <field name="branch_id"/>
									<field name="new_branch_id"/>
                                    <field name="date"/>
                                    <field name="category_id"/>
                                    <field name="new_category_id" />
									<field name="number_depreciation"/>
									<field name="new_number_depreciation"/>
									<field name="purchase_value"/>
									<field name="new_purchase_value"/>
									<field name="purchase_date"/>
									<field name="new_purchase_date"/>
									<field name="state"/>									
								</tree>
							</field>
						</page>
						<page string="Audit Trail">
							<group>
								<group>
									<field name="create_uid" readonly="1"></field>
									<field name="create_date" readonly="1"></field>
									<field name="confirm_uid" readonly="1"></field>
									<field name="confirm_date" readonly="1"></field>									
								</group>
								<group>							
									<field name="write_uid" readonly="1"></field>
									<field name="write_date" readonly="1"></field>
								</group>
							</group>
						</page>
				</xpath> 
            </field>
        </record>
         
    <record model="ir.actions.act_window" id="account_asset.action_account_asset_asset_form">
        <field name="domain">[('categ_type','=','fixed')]</field>	     	        
    </record>
                
    <record model="ir.actions.act_window" id="account_asset.action_account_asset_asset_tree">
        <field name="domain">[('categ_type','=','fixed')]</field>	     	        

    </record>    
    
		<record model="ir.ui.view" id="asset_classification_form_view">
		    <field name="name">wtc.asset.classification.form</field>
		    <field name="model">wtc.asset.classification</field>
		    <field name="arch" type="xml">
		        <form>	        	      
						<group col="2" colspan="2">   
							<field name="name" required="1"/>
							<field name="code" required="1"/> 
							<field name="categ_id" required="1"/>
						</group>
	                    <notebook colspan="5">
							<page string="Audit Trail">
								<group>
									<group>
										<field name="create_uid" readonly="1"></field>
										<field name="create_date" readonly="1"></field>
									</group>
									<group>							
										<field name="write_uid" readonly="1"></field>
										<field name="write_date" readonly="1"></field>
									</group>
								</group>
							</page>	
	                    </notebook>								           
		        </form>
		    </field>
		</record>

		<record model="ir.ui.view" id="asset_classification_tree_view">
		    <field name="name">wtc.asset.classification.tree</field>
		    <field name="model">wtc.asset.classification</field>
		    <field name="arch" type="xml">
		        <tree string="" create="true" editable="top">
		        	<field name="name" required="1"/>
		        	<field name="code" required="1"/> 
		            <field name="categ_id" required="1"/>
		        </tree>
		     </field>
		</record>

 		<record id="view_asset_classification_filter" model="ir.ui.view">
            <field name="name">wtc.asset.classification.list.select</field>
            <field name="model">wtc.asset.classification</field>
            <field name="arch" type="xml">
                <search string="Search Asset Class">
                    <field name="name" /> 
                    <field name="code" /> 
					<field name="categ_id"/> 
                </search>
            </field>
        </record>		
		<record model="ir.actions.act_window" id="asset_classification_action">
		    <field name="name">Asset Classification</field>
		    <field name="res_model">wtc.asset.classification</field>
		    <field name="view_type">form</field>
		    <field name="view_mode">tree,form</field>
		    <field name="search_view_id" ref="view_asset_classification_filter"/>
		</record>
					
		<record id="view_asset_filter" model="ir.ui.view">
	            <field name="name">account.asset.asset.list.select</field>
	            <field name="model">account.asset.asset</field>
	            <field name="inherit_id" ref="account_asset.view_account_asset_search"/>
	            <field name="arch" type="xml">
	            	<field name='partner_id' position='replace'/>
	            	<field name="name" position='after'>
	            		<field name="branch_id"/>
	            		<field name="code"/>
	            		<field name='partner_id' string='Vendor'/>
             		    <field name="register_no"/>     		
	            	</field>
	            </field>
	    </record> 
	    
		<record id="view_asset_tree_view_custom" model="ir.ui.view">
	            <field name="name">account.asset.asset.tree.view.select</field>
	            <field name="model">account.asset.asset</field>
	            <field name="inherit_id" ref="account_asset.view_account_asset_asset_tree"/>
	            <field name="arch" type="xml">
	            	<field name="name" position='before'>
	            		<field name="register_no"/>   		
	            	</field>
	            	<field name="name" position="after">
	            		<field name="code"/>
						<field name="branch_id"/>	            		
	            	</field>
	            </field>
	    </record>
	    	    
		<menuitem id="ga_report_menu" parent="wtc_dealer_menu.general_affair_top_menu" name="Report" sequence="35"></menuitem>    
	            		
		<menuitem id="asset_classification_submenu" parent="wtc_dealer_menu.ga_configuration_menu"  action="asset_classification_action" sequence="2"/>
    	<menuitem parent="wtc_dealer_menu.ga_asset_menu" id="menu_action_account_asset_asset_form_ga" sequence="1" action="account_asset.action_account_asset_asset_form"/>
        <menuitem parent="wtc_dealer_menu.ga_configuration_menu" id="menu_action_account_asset_asset_list_normal_ga" action="account_asset.action_account_asset_asset_list_normal" sequence="1"/>
	    <menuitem parent="wtc_dealer_menu.ga_asset_menu" id="menu_action_account_asset_asset_tree_ga" sequence="2" action="account_asset.action_account_asset_asset_tree"/>    							 		
   	</data>
</openerp>



