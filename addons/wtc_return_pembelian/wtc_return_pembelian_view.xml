<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		
		<record model="ir.ui.view" id="wtc_return_pembelian_tree_view">
			<field name="name">wtc.return.pembelian.tree.view</field>
			<field name="model">wtc.return.pembelian</field>
			<field name="arch" type="xml">
				<tree string="Return Pembelian">
					<field name="name"/>
					<field name="branch_id"/>
					<field name="no_faktur"/>
					<field name="tgl_faktur"/>
					<field name="state" />
				</tree>
			</field>
		</record>
		
		<record model="ir.ui.view" id="wtc_return_pembelian_form_view">
			<field name="name">wtc.return.pembelian.form.view</field>
			<field name="model">wtc.return.pembelian</field>
			<field name="arch" type="xml">
				<form string="Form Return Pembelian">
					<header>
						<button name="action_confirm"  attrs="{'invisible': [('state','!=','approved')]}"  string="Confirm" class="oe_highlight" type="object" />
						<button name="action_view_invoice"  attrs="{'invisible': [('state','!=','posted')]}"  string="View Invoice" class="oe_highlight" type="object" />
						<button name="action_view_delivery_order"  attrs="{'invisible': [('state','!=','posted')]}"  string="View Delivery Order" class="oe_highlight" type="object" />
						<field name="state" widget="statusbar" statusbar_visible="draft,waiting_for_approval,approved,posted" />
					</header>
					<sheet>
						<div class="oe_title">                      
		       				<h1>
					            <label string="Return Pembelian"/>
					 			<field name="name" class="oe_inline" readonly="1"/>	
		    			    </h1>
	                    </div>
	                    <group col="2" colspan="2">
	                    	<group>
                    			<field name="branch_id" options="{'no_show':True,'no_create':True,'no_open':True}"  attrs="{'readonly': [('state','!=','draft')]}"/>
	                    	</group>
	                    	<group>
	                    		<field name="division" attrs="{'readonly': [('state','!=','draft')]}"/>
	                    	</group>
	                    	<group>
	                    		<field name="supplier_id" attrs="{'readonly': [('state','!=','draft')]}" options="{'no_show':True,'no_create':True,'no_open':True}"/>
	                    		<field name="no_faktur" attrs="{'readonly': [('state','!=','draft')], 'required': [('division','=','Sparepart')]}" options="{'no_show':True,'no_create':True,'no_open':True}"/>
	                    		<field name="tgl_faktur" readonly="1" />
	                    	</group>
	                    	<group>
	                    		<field name="date"  readonly='1'/>
	                    		<field name="payment_term" options="{'no_show':True,'no_create':True,'no_open':True}" attrs="{'readonly': [('state','!=','draft')]}"/>
	                    	</group>
	                    </group>
	                    <notebook colspan="5">
	                    	<page string="Return Pembelian Line">
	                    		<field name="return_pembelian_line"  attrs="{'readonly': [('state','!=','draft')]}" > 
	                    			<tree editable="top"> 
			                    		<field name="product_id" options="{'no_show':True,'no_create':True,'no_open':True}"/>
			                    		<field name="name" readonly="1"/>
			                    		<field name="division" invisible="1" />
			                    		<field name="lot_id" attrs="{'invisible': [('division','=','Sparepart')], 'required': [('division','=','Unit')]}" options="{'no_show':True,'no_create':True,'no_open':True}"/>
			                    		<field name="price_unit" />
			                    		<field name="qty" />
			                    		<field name="tax_id" widget="many2many_tags" options="{'no_show':True,'no_create':True,'no_open':True}"/>
			                    		<field name="amount_subtotal"/>
			                    	</tree>
		                    	</field>
		                    	 <group class="oe_subtotal_footer oe_right" colspan="2" name="sale_total">
                                <field name="amount_untaxed" widget='monetary' options="{'currency_field': 'currency_id'}"/>	
								<field name="discount_cash"  string="Discount Cash" attrs="{'readonly':[('state','not in','draft')]}"/>
								<field name="discount_program" attrs="{'readonly':[('state','not in','draft')]}"/>
								<field name="discount_lain" attrs="{'readonly':[('state','not in','draft')]}"/>
                                <field name="amount_tax" widget='monetary' options="{'currency_field': 'currency_id'}"/>
                                <div class="oe_subtotal_footer_separator oe_inline">
                                    <label for="amount_total" />
                                    <button name="button_dummy"
                                        states="draft,sent" string="(update)" type="object" class="oe_edit_only oe_link"/>
                                </div>
                                <field name="amount_total" nolabel="1" class="oe_subtotal_footer_separator" widget='monetary' options="{'currency_field': 'currency_id'}"/>
                            </group>
                            <div class="oe_clear"/>
	                    	</page>
	                    	<page string="Audit Trail">
								<group>
									<group>
										<field name="create_uid" readonly="1"></field>
										<field name="create_date" readonly="1"></field>
										<field name="confirm_uid" readonly="1"></field>
										<field name="confirm_date" readonly="1"></field>
									</group>
									<group>							
										<field name="write_uid" readonly="1"></field>
										<field name="write_date" readonly="1"></field>
									</group>
								</group>
							</page>	
				
	                    	
	                    </notebook>
					</sheet>
				</form>
			</field>
		</record>
		
		<record  model="ir.actions.act_window" id="action_return_pembelian">
			<field name="name">Return Pembelian</field>
			<field name="res_model">wtc.return.pembelian</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>
	
	 <menuitem action="action_return_pembelian" id="menu_return_pembelian" parent="wtc_dealer_menu.showroom_sales_menu" sequence="21"/>
	 
	</data>
</openerp>