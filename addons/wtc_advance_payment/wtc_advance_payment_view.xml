<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    
    	 <record id="view_wtc_advance_payment_tree" model="ir.ui.view">
            <field name="name">wtc.advance.payment.tree</field>
            <field name="model">wtc.advance.payment</field>
            <field name="arch" type="xml">
                <tree string="Advance Payment">
                	<field name="name"/>
	                <field name="user_id"/>
	                <field name="date"/>
	                <field name="state"/>
	                
                </tree>
            </field>
        </record>
 		<record id="view_advance_payment_search" model="ir.ui.view">
            <field name="name">wtc.advance.payment.select</field>
            <field name="model">wtc.advance.payment</field>
            <field name="arch" type="xml">
                <search string="Search ADV Payment">
                    <field name="name"/>
                    <field name='division'/>
                    <field name="branch_id"/> 
                    <field name="payment_method"/> 
                    <group expand="0" string="Group By">
                        <filter string="Branch" icon="terp-partner" domain="[]" context="{'group_by':'branch_id'}"/>
                        <filter string="Tanggal" icon="terp-go-month" domain="[]" context="{'group_by':'date'}"/>                    
                    </group>
                </search>
            </field>
        </record>	        
        <record id="view_wtc_advance_payment_form" model="ir.ui.view">
            <field name="name">wtc.advance.payment.form</field>
            <field name="model">wtc.advance.payment</field>
            <field name="arch" type="xml">
                <form string="Advance Payment">
                	<header>
                		<button name="action_print_advance_payment" states="draft,waiting_for_approval,approved" type="object" string="Print Draft" class="oe_highlight" icon="gtk-print"/>
                		<button name="%(report_advance_payment_done)d" states="done" type="action" string="Print Done" class="oe_highlight"  icon="gtk-print"/>
                		<button name="confirm" states="approved" string="Confirm" type="workflow" class="oe_highlight"/>             			                		
                        <button name="action_klik_payment" type="object" class="oe_highlight" string="Payment Klik" attrs="{'invisible':['|',('state','not in',('approved','confirmed','done')),('payment_klik_uid','!=',False)]}" groups="wtc_advance_payment.group_wtc_advance_payment_is_payment"/>
                		<field name="state" widget="statusbar" statusbar_visible="draft,waiting_for_approval,approved,confirmed,done"/>
                	</header>
        			<sheet>
                   		<div class="oe_title">                      
		       				<h1>
					            <label string="Advance Payment"/>
					 			<field name="name" class="oe_inline" readonly="1"/>	
		    			    </h1>
	                    </div>
	                    <group>
	                   		<group col="4">
		                   		<field name="branch_id" options="{'no_create': True,'no_open':True}" attrs="{'readonly': [('name','!=',False)]}" class="oe_inline"/>
		                   		<field name="division" options="{'no_create': True,'no_open':True}" attrs="{'readonly': [('state','not in','draft')]}" class="oe_inline"/>
		                   		<field name="date" options="{'no_create': True,'no_open':True}" readonly="1" class="oe_inline"/>
		                   		<field name="date_due" class="oe_inline" required="1" attrs="{'readonly': [('state','not in','draft')]}"/>		                   					                   		
		                   		<field name="user_id" options="{'no_create': True,'no_open':True}" attrs="{'readonly': [('state','not in','draft')]}" class="oe_inline"/>
		                   		<field name='employee_id' invisible='1'/>
		                   		<field name="user_balance"  class="oe_inline"/>
		                   		<field name="payment_method" domain="[('type','in',['bank', 'cash']),('branch_id','=',branch_id)]" attrs="{'readonly': [('state','not in','draft')]}" options="{'no_create': True,'no_open':True}" class="oe_inline"/>
		                   		<field name="amount" attrs="{'readonly': [('state','not in','draft')]}" />
			                	<field name="description" coslpan="2" attrs="{'readonly': [('state','not in','draft')]}" />
                                <field name="no_rekening_tujuan" attrs="{'readonly': [('state','not in',('draft','waiting_for_approval'))]}"/>
                                <field name="is_payment" readonly="1"/>
                                <field name="payment_klik_uid" readonly="1" attrs="{'invisible':[('payment_klik_uid','=',False)]}" options="{'no_open':True,'no_create':True}"/>
                                <field name="payment_klik_date" readonly="1" attrs="{'invisible':[('payment_klik_date','=',False)]}"/>
                            </group>
                        </group>
	            	</sheet>
        		</form>
     		</field>
    	</record>
    
    	<!--record forcecreate="True" model="ir.property" id="property_journal_advance_payment">
		    <field name="name">property_journal_advance_payment</field>
		    <field name="fields_id" search="[('model','=','wtc.advance.payment'),
		      ('name','=','journal_id')]"/>
		    <field name="value" eval="'account.journal,'+str(10)"/>
		</record-->
		
    	<record model="ir.actions.act_window" id="wtc_advance_payment">
		    <field name="name">Advance Payment</field>
		    <field name="res_model">wtc.advance.payment</field>
		    <field name="view_type">form</field>
		    <field name="view_mode">tree,form</field>
		</record>

        <menuitem id="wtc_advance_payment_menuitem" name="Advance Payment" parent="wtc_dealer_menu.backoffice_nontrade_menu" action="wtc_advance_payment" sequence="10"/>
    	
    </data>
</openerp>