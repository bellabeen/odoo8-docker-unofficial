<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data> 
	   	<record id="view_teds_pricelist_request_reject_form" model="ir.ui.view">
            <field name="name">teds.pricelist.request.reject.form</field>
            <field name="model">teds.pricelist.request</field>
            <field name="arch" type="xml">
            	<form>
            		<sheet>
            			<group>
            				<field name="reject_reason" required="1"/>
            			</group>
            			<footer>
	                    <button name="action_reject_form" string="Confirm" type="object" class="oe_highlight" />
	                    <button string="Cancel" class="oe_link" special="cancel" />
	                </footer>
            		</sheet>
            	</form>
            </field>
        </record>
        
        <record id="view_teds_pricelist_request_tree" model="ir.ui.view">
            <field name="name">teds.pricelist.request.tree</field>
            <field name="model">teds.pricelist.request</field>
            <field name="arch" type="xml">
            	<tree>
            	    <field name="branch_id"/>
            	    <field name="name"/>
                    <field name="date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="view_teds_pricelist_request_form" model="ir.ui.view">
            <field name="name">teds.pricelist.request.form</field>
            <field name="model">teds.pricelist.request</field>
            <field name="arch" type="xml">
            	<form>
            		<header>
            			<button name="action_rfa" string="RFA" type="object" class="oe_highlight" states="draft" groups="teds_pricelist_request.group_rfa_pricelist_request_button"/>
            			<button name="action_approved" string="Approved" type="object" class="oe_highlight" states="waiting_for_approval" groups="teds_pricelist_request.group_approved_pricelist_request_button"/>
            			<button name="action_reject" string="Reject" type="object" states="waiting_for_approval" groups="teds_pricelist_request.group_reject_pricelist_request_button"/>
            			<button name="action_confirm" string="Confirm" type="object" class="oe_highlight" states="approved" groups="teds_pricelist_request.group_confirm_pricelist_request_button"/>
            			<button name="action_cancel_approved" string="Cancel Request" type="object" class="oe_highlight" states="waiting_for_approval" groups="teds_pricelist_request.group_cancel_approval_pricelist_request_button"/>


	                    <field name="state" widget="statusbar" statusbar_visible="draft,confirmed"/>
	                </header>
            		<sheet>
            			<div class="oe_title">
            				<h1><field name="name" readonly="1"/></h1>
            			</div>
            			<group>
            				<group>
		            	    	<field name="branch_id" required="1" options="{'no_open':True,'no_create':True}" attrs="{'readonly':[('create_date','!=',False)]}"/>
		                    	<field name="create_date" invisible="1"/>
		            	    </group>
		            	    <group>
		                    	<field name="date" readonly="1"/>
                                <field name="reject_reason" readonly="1" states="reject"/>
		            	    </group>
		                </group>
		                <notebook>
		                	<page string="Detail">
		                		<field name="detail_ids" attrs="{'readonly':[('state','!=','draft')]}">
		                			<tree editable="buttom">
		                				<field name="sequence" required="1"/>
		                				<field name="division" invisible="1"/>
                                        <field name="type" required="1"/>
                                        <field name="pricelist_show_id" options="{'no_open':True,'no_create':True}" readonly="1"/>
                                        <field name="pricelist_version_show_id"  options="{'no_open':True,'no_create':True}" readonly="1"/>
                                        <field name="pricelist_id" options="{'no_open':True,'no_create':True}" invisible="1"/>
                                        <field name="pricelist_version_id"  options="{'no_open':True,'no_create':True}" invisible="1"/>
                                        <field name="product_template_id" attrs="{'readonly':[('product_id','!=',False)]}" options="{'no_open':True,'no_create':True}"/>
		                				<field name="product_id" attrs="{'readonly':[('product_template_id','!=',False)]}" options="{'no_open':True,'no_create':True}"/>
		                				<field name="last_price" invisible="1"/>
		                				<field name="last_price_show" readonly="1"/>
		                				<field name="new_price" required="1"/>
		                				<field name="selisih"/>
		                			</tree>
		                		</field>
		                	</page>
                            <page string="Audit Trail">
                                <group>
                                    <group>
                                        <field name="create_uid" readonly="1"/>
                                        <field name="create_date" readonly="1"/>
                                        <field name="approve_uid" readonly="1" attrs="{'invisible':[('approve_uid','=',False)]}"/>
                                        <field name="approve_date" readonly="1" attrs="{'invisible':[('approve_date','=',False)]}"/>
                                        <field name="reject_uid" readonly="1" attrs="{'invisible':[('reject_uid','=',False)]}"/>
                                        <field name="reject_date" readonly="1" attrs="{'invisible':[('reject_date','=',False)]}"/>
                                    </group>
                                    <group>                         
                                        <field name="write_uid" readonly="1"/>
                                        <field name="write_date" readonly="1"/>
                                        <field name="confirm_uid" readonly="1" attrs="{'invisible':[('confirm_uid','=',False)]}"/>
                                        <field name="confirm_date" readonly="1" attrs="{'invisible':[('confirm_date','=',False)]}"/>
                                    </group>
                                </group>
                            </page>     
		                </notebook>
		            </sheet>
                </form>
            </field>
        </record>


		<record id="action_teds_pricelist_request" model="ir.actions.act_window" >
		    <field name="name">Pricelist Request</field>
		    <field name="res_model">teds.pricelist.request</field>
		    <field name="view_type">form</field>
    		<field name="view_mode">tree,form</field>
		</record>

        <menuitem id="teds_pricelist_request_menuitem" action="action_teds_pricelist_request" parent="wtc_dealer_menu.ma_pricelist_menu" sequence="5"/>
	        
    </data>
</openerp>