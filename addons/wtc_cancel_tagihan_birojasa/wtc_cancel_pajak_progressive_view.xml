<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    	<record model="ir.ui.view" id="wtc_cancel_pajak_progressive_tree_view">
		    <field name="name">wtc.cancel.pajak.progressive.tree</field>
		    <field name="model">wtc.cancel.pajak.progressive</field>
		    <field name="arch" type="xml">
		        <tree string="Cancel Pajak Progressive">
		        	<field name="name"/>
		        	<field name="branch_id"/>
		        	<field name="division" />
		        	<field name="pajak_id" />
		        	<field name="date" />
		        	<field name="state" />
		        </tree>
		    </field>
    	</record>

    	<record model="ir.ui.view" id="wtc_cancel_pajak_progressive_form_view">
		    <field name="name">wtc.cancel.pajak.progressive.form</field>
		    <field name="model">wtc.cancel.pajak.progressive</field>
		    <field name="arch" type="xml">
		        <form string="Form Cancel Pajak Progressive">
		        <header>
		        	<button name="request_approval" string="RFA" states="draft" type="object" class="oe_highlight" groups="wtc_cancel_tagihan_birojasa.group_pajak_progressive_cancel_rfa"/>
		        	<button name="approve" string="Approve" states="waiting_for_approval" type="object" class="oe_highlight"/>
		        	<button name="%(wtc_approval.wtc_approval_reject_wizard_action)d" attrs="{'invisible': [('state','!=','waiting_for_approval')]}" string="Reject" type="action" context="{'model_name':'wtc.cancel.pajak.progressive','update_value':{'approval_state':'r','state':'draft'}}"/>
		        	<button name="confirm" string="Confirm" states="approved" type="object" class="oe_highlight" groups="wtc_cancel_tagihan_birojasa.group_pajak_progressive_cancel_confirm"/>
		        	<button name="%(wtc_approval.wtc_approval_cancel_wizard_action)d" attrs="{'invisible': [('state','!=','waiting_for_approval')]}" string="Cancel Approval" type="action" context="{'model_name':'wtc.cancel.pajak.progressive','update_value':{'approval_state':'b','state':'draft'}}" groups="wtc_cancel_tagihan_birojasa.group_pajak_progressive_cancel_approval"/>
                        
                    <field name="state" widget="statusbar" statusbar_visible="draft,waiting_for_approval,approved,confirmed"/>
		        </header>
		        	<sheet>
			        	<div class="oe_title">
			        		<h2>
				                <field name="name" class="oe_inline" readonly="1"/>    			
			 				</h2>
			        	</div> 
			        	<group col="2" colspan="2">   
							<group>
								<field name="branch_id" options="{'no_create': True,'no_open': True}" required="1" attrs="{'readonly': ['|',('state','!=','draft'),('name','!=',False)]}"/>
								<field name="pajak_id" required="True" options="{'no_create':True,'no_open':True}" attrs="{'readonly':[('state','!=','draft')]}"/>
								<field name="pajak_line_ids" widget="many2many_tags" options="{'no_create': True,'no_open': True}" required="1" attrs="{'readonly': [('state','!=','draft')]}"/>
								<field name="approval_state" readonly="1"/>
		        			</group>
		        			<group>
		        				<field name="division" required="1" attrs="{'readonly': [('state','!=','draft')]}"/>
		        				<field name="date" attrs="{'readonly': [('state','!=','draft')]}" readonly="1"/>
		        				<field name="reason" attrs="{'readonly': [('state','!=','draft')]}"/>
		        			</group>	
						</group>
						<notebook>
                        	<page string="Approval">
								<field name="approval_ids">
									<tree string="Approval" editable="bottom" create="false" edit="false" delete="false" >
	 									<field name="group_id"/>
										<field name="branch_id"/>
										<field name="division"/>
										<field name="limit"/>
										<field name="sts"/>
										<field name="reason"/>
										<field name="pelaksana_id"/>
										<field name="tanggal"/>
 							    </tree>
								</field>
							</page>
							<page string="Journal Items" states="confirmed">
								<group col="4">
 	                                <field name="period_id" readonly="1"/>
 	                            </group>
								<field name="move_ids" readonly="1">
	                               <tree string="Journal Items">
 	                                   <field name="move_id"/>
	                                   <field name="branch_id"/>
	                                   <field name="ref"/>
	                                   <field name="date"/>
	                                   <field name="statement_id"/>
	                                   <field name="partner_id"/>
	                                   <field name="account_id"/>
	                                   <field name="name"/>
	                                   <field name="debit"/>
	                                   <field name="credit"/>
	                                   <field name="state"/>
	                                   <field name="reconcile_id"/>
	                            </tree>
	                            </field>
							</page>
							<page string="Audit Trail">
								<group>
									<group>
 										<field name="create_uid" readonly="1"></field>
										<field name="create_date" readonly="1"></field>
										<field name="confirm_uid" readonly="1"></field>
										<field name="confirm_date" readonly="1"></field>
 									</group>
									<group>
 										<field name="write_uid" readonly="1"></field>
										<field name="write_date" readonly="1"></field> 
									</group>
								</group>
							</page>
                        </notebook>
		           </sheet>
		        </form>
		     </field>
		</record>

		<record id="view_cancel_pajak_progressive_filter" model="ir.ui.view">
            <field name="name">cancel.pajak.progressive.filter</field>
            <field name="model">wtc.cancel.pajak.progressive</field>
            <field name="arch" type="xml">
                <search string="Search">
                    <field name="name"/>
                    <field name="pajak_id"/>
                    <filter name="draft" string="Draft" domain="[('state','=','draft')]"/>
                    <filter name="waiting_for_approval" string="Waiting For Approval" domain="[('state','=','waiting_for_approval')]"/>
                    <filter name="approved" string="Approved" domain="[('state','=','approved')]"/>
                    <filter name="confirmed" string="Confirmed" domain="[('state','=','confirmed')]"/>

                </search>
            </field>
        </record>

    	<record model="ir.actions.act_window" id="wtc_cancel_pajak_progressive_action">
		    <field name="name">Cancel Pajak Progressive</field>
		    <field name="res_model">wtc.cancel.pajak.progressive</field>
		    <field name="view_type">form</field>
		    <field name="view_mode">tree,form</field>
		</record>				

    	<menuitem id="cancel_pajak_progressive_submenu" name="Cancel Pajak Progressive" parent="wtc_dealer_menu.stnk_bpkb_proses_stnk_menu"  action="wtc_cancel_pajak_progressive_action" sequence="18"/> 
    </data>
</openerp> 
