<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>

		<record model="ir.ui.view" id="wtc_program_subsidi_tree_view">
		    <field name="name">wtc.program.subsidi.tree</field>
		    <field name="model">wtc.program.subsidi</field>
		    <field name="arch" type="xml">
		        <tree string="Program Subsidi">
		            <field name="name"/>
		            <field name="branch_id"/>
					<field name="division"/>
					<field name="tipe_subsidi"/>
					<field name="area_id"/>
					<field name="instansi_id"/>
					<field name="date_start"/>
					<field name="date_end"/>
					<field name="state"/>
		        </tree>
		     </field>
		</record>
		 <record id="view_program_subsidi_search" model="ir.ui.view">
            <field name="name">wtc.program.subsidi.search</field>
            <field name="model">wtc.program.subsidi</field>
            <field name="arch" type="xml">
                <search string="Search Program Subsidi">
                	<field name='name'/>
        			<field name='branch_id'/>
        			<field name='area_id'/>
        			<field name='division'/>
        			<field name='tipe_subsidi'/>
        			<field name='instansi_id'/>		        			
                    <group expand="0" string="Group By">
                        <filter string="Branch" icon="terp-go-month" domain="[]" context="{'group_by':'branch_id'}"/>
               
                    </group>
                </search>
            </field>
        </record>		
   		<record model="ir.ui.view" id="wtc_program_subsidi_form_view">
		    <field name="name">wtc.program.subsidi.form</field>
		    <field name="model">wtc.program.subsidi</field>
		    <field name="arch" type="xml">
		        <form string="Program Subsidi" version="7.0">
 		        	<header>
		        		<field name="state" widget="statusbar" statusbar_visible="draft,waiting_for_approval,approved" statusbar_colors='{"draft":"red","approved":"blue"}'/>	
		        	</header>
		        	<group>
						<group>
						    <field name="branch_id" options="{'no_create': True,'no_open': True}" attrs="{'readonly':[('state','not in',['draft','on_revision'])]}"/>
							<field name="division" attrs="{'readonly':[('state','not in',['draft','on_revision'])]}"/>
							<field name="area_id"  options="{'no_create': True,'no_open': True}" domain="[('branch_ids','=',branch_id)]" attrs="{'readonly':[('state','not in',['draft','on_revision'])]}"/>
						    <field name="name" attrs="{'readonly':[('state','not in',['draft','on_revision'])]}"/>
						    <label for="date_start" string="Date Start"/>
		                       	<div>
			                        <field name="date_start" class="oe_inline" nolabel="1" attrs="{'readonly':[('state','not in',['draft','on_revision'])]}"/> -
			                        <field name="date_end" nolabel="1" class="oe_inline" attrs="{'readonly':[('state','not in',['draft','editable','on_revision'])]}"/>
		                        </div>
		                    <field name="partner_ref" attrs="{'readonly':[('state','not in',['draft','on_revision'])]}"/>
		                    <field name="tipe_subsidi" attrs="{'readonly':[('state','not in',['draft','on_revision'])]}"/>
	                    	<field name="instansi_id" options="{'no_create': True,'no_open': True}" attrs="{'readonly':[('state','not in',['draft','on_revision'])]}"/>                    	
	                      </group>
	                      <group>
	                      	<field name="active" attrs="{'readonly':[('state','not in',['draft','on_revision'])]}"/>
	                      	<field name="keterangan" attrs="{'readonly':[('state','not in',['draft','on_revision'])]}"/>
	                    	<label for="nilai_promo" string="Nilai Promo"/> 
	                    	<div>
	                    		<field name="nilai_promo" class="oe_inline" nolabel="1"/>
                             	<button name="button_dummy"
                                        states="draft" string="(update)" type="object" class="oe_edit_only oe_link" nolabel="1"/>
                             </div>                                               	          	
						</group>
					</group>
 		        <notebook>
                    <page string="Program Subsidi Lines">		             
					   <field colspan="4" name="program_subsidi_line" nolabel="1" attrs="{'readonly':[('state','not in',['draft','on_revision'])]}">
					       <tree string="Program Subsidi" editable="bottom">
							  <field name="product_template_id" options="{'no_create': True,'no_open': True}" on_change="_get_domain_program_subsidi()"/>
							  <field name="tipe_dp"/>									
							  <field name="amount_dp"/>	
							  <field name="diskon_ahm"/>
							  <field name="diskon_md"/>
							  <field name="diskon_dealer"/>
							  <field name="diskon_finco"/>
							  <field name="diskon_others" invisible="1"/>
							  <field name="total_diskon"/>									          
					       </tree>			                
			           </field>
			       </page>		       
			   </notebook>
	                <div class="oe_chatter">
	                    <field name="message_follower_ids" widget="mail_followers"/>
	                    <field name="message_ids" widget="mail_thread"/>
	                </div>			   
			  </form>
		    </field>
		</record>
		<record model="ir.actions.act_window" id="wtc_program_subsidi_action">
		    <field name="name">Program Subsidi</field>
		    <field name="res_model">wtc.program.subsidi</field>
		    <field name="view_type">form</field>
		    <field name="view_mode">tree,form</field>
		</record>
 		<menuitem id="program_subsidi_menuitem" parent="wtc_dealer_menu.showroom_configuration_menu" sequence="3" action="wtc_program_subsidi_action"/>     					   		 
</data>
</openerp>